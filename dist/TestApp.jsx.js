function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var n=require("react"),r=e(n),t=require("react-toastify");require("ionicons/icons"),require("@material-ui/core");var o=e(require("@material-ui/core/Box")),i=require("@material-ui/icons"),a=e(require("prop-types"));require("react-router-dom");var l=e(require("styled-components")),s=e(require("axios"));require("@capacitor/core");var c=e(require("react-modal"));function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(this,arguments)}function d(e,n){if(null==e)return{};var r,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)n.indexOf(r=i[t])>=0||(o[r]=e[r]);return o}function p(e,n){return n||(n=e.slice(0)),e.raw=n,e}var m,f,h,g,v,y,x,b,w,O,E,M,C,k,q={anonUser:{},bottomDrawerOpen:"bottom-drawer-open",collapsible:{description:"descr-sec",extra1:"extra1-sec",extra2:"extra2-sec",extra3:"extra3-sec",map:"map-sec",markers:"markers-sec"},collapsibles:"collapsibles",current_user:"current_user",horizontal:"horizontal",item_types:{gallery:"Gallery",report:"Report",video:"Video"},jwt_token:"jwt_token",layout_onecol:"onecol",layout_mapui:"mapui",locations:{earth:"earth"},map_panel_types:{Equirectangular:"Equirectangular",MapPanel:"MapPanel",MapPanelNoZoom:"MapPanelNoZoom",ThreePanelV1:"ThreePanelV1",ThreePanelV4:"ThreePanelV4"},names:{scratchpad:"Scratchpad"},rated:{nc17:"nc-17"},ratedConfirmation:"rated-confirmation",theme:"theme",themes:{dark:"dark",light:"light"},twofoldPercent:"twofold-percent",variants:{bordered:"bordered",floating:"floating",inline:"inline",transparent:"transparent"},vertical:"vertical"},P=s.create({}),L=["children"],j=["children"],R=["children","onClose"],T=(l.div(m||(m=p(["\n\n  // @TODO: this should use variables, for Modal inner size.\n  // I'd need to do dependency injection of the variable, from infiniteshelterjs into ishlibjs.\n  position: fixed; // for GalleriesShow\n  top: 60px;\n  right: 60px;\n\n  display: flex;\n  flex-direction: row-reverse;\n"]))),l.div(f||(f=p(["\n  margin-right: 5px;\n  cursor: pointer;\n"]))),l.div(h||(h=p(["\n  border: 1px solid gray;\n  border-radius: 5px;\n  cursor: pointer;\n  display: inline-block;\n  padding: .3em 1em;\n"])))),_=(l(i.ChevronLeft)(g||(g=p(["\n  color: ","\n"])),function(e){return e.theme.colors.text}),l(i.ChevronRight)(v||(v=p(["\n  color: ","\n"])),function(e){return e.theme.colors.text}),l(o)(y||(y=p(["\n  margin-bottom: 1em;\n  padding: 1em;\n  background: white;\n  cursor: ",";\n\n  display: flex;\n  flex-direction: column;\n"])),function(e){return e.cursor?e.cursor:"auto"}),function(e){var n=d(e,L);return r.createElement(i.Close,u({style:u({cursor:"pointer"},n.style)},n))});_.propTypes={onClick:a.func.isRequired};var S=l.div(x||(x=p(["\n  display: flex;\n  flex-direction: column;\n\n  > * {\n    margin: auto .4em; // @TODO: standardize this size!\n  }\n"]))),N=function(e){var n=e.children,t=d(e,j);return r.createElement(S,u({className:"FlexCol"},t),n)},z=l.div(b||(b=p(["\n  display: flex;\n\n  > * {\n    // margin: auto .4em; // @TODO: why? the LoginModal needs no margins!\n  }\n"]))),B=(l.div(w||(w=p(["\n  position: fixed;\n  z-index: 999;\n  overflow: show;\n  margin: auto;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  width: 50px;\n  height: 50px;\n"]))),function(e,n,r){void 0===n&&(n=""),void 0===r&&(r=null),(r="string"==typeof r?r:n.replace(/\W/g,"")).length>0&&"undefined"!=typeof window&&(window[r]=e),console.log("+++ "+n+":",e)}),D=(l(i.Menu)(O||(O=p(["\n  color: ","\n"])),function(e){return e.theme.colors.text}),l.div(E||(E=p(["\n  flex-grow: 1;\n  text-align: center;\n  font-size: 1.2rem;\n"])))),U=function(e){var n=e.children,t=e.onClose;return d(e,R),r.createElement(z,null,r.createElement(D,null,n),r.createElement(_,{onClick:t}))};U.propTypes={onClose:a.func.isRequired},l.div(M||(M=p(["\n  border: ",";\n  border-radius: ",";\n  background: ",";\n  padding: .5em;\n\n  margin-bottom: 1em;\n"])),function(e){return e.theme.thinBorder},function(e){return e.theme.thinBorderRadius},function(e){return e.theme.colors.cardBackground}),l.div(C||(C=p(["\n  border: ",";\n  border-radius: ",";\n  background: ",";\n  color: ",";\n\n  margin: 0 .5em .5em 0;\n  padding: .5em;\n\n  text-align: center;\n\n  width: 18%;\n  max-width: 140px;\n  min-width: 120px;\n"])),function(e){return e.theme.thinBorder},function(e){return e.theme.thinBorderRadius},function(e){return e.theme.colors.cardBackground},function(e){return e.theme.colors.text}),l.div(k||(k=p(["\n  height: 100vh;\n"]))),r.createContext({});var A={LoginModal:"_2YolN",LoginModalOverlay:"_3hqvY",Notice:"_2ifwF"},V=function(e){var t=e.onError,o=e.onSuccess,i=n.useContext(G),a=i.loginModalOpen,l=i.setLoginModalOpen,s=i.setRegisterModalOpen,u=i.useApi,d=n.useState(""),p=d[0],m=d[1],f=n.useState(""),h=f[0],g=f[1],v=u(),y=function(e,n){try{return v.postLogin({email:e,password:n}).then(function(e){l(!1),o(e)}).catch(function(e){t(e)}),Promise.resolve()}catch(e){return Promise.reject(e)}};return c.setAppElement("body"),r.createElement(c,{className:"LoginModal "+A.LoginModal,isOpen:!!a,overlayClassName:A.LoginModalOverlay,portalClassName:A.LoginModalPortal},r.createElement(U,{onClose:function(){return l(!1)}},"Login"),"string"==typeof a&&r.createElement(z,null,r.createElement("div",{className:A.Notice},a)),r.createElement(N,null,r.createElement("label",{htmlFor:"email"},"Email"),r.createElement("input",{name:"email",type:"email",value:p,onChange:function(e){return m(e.target.value)}}),r.createElement("label",{htmlFor:"password"},"Password"),r.createElement("input",{name:"password",type:"password",value:h,onChange:function(e){return g(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&y(p,h)}}),r.createElement(z,{style:{flexDirection:"row-reverse",justifyContent:"space-between",marginTop:"0.4em"}},r.createElement(T,{onClick:function(){return y(p,h)}},"Login"))),r.createElement("hr",{style:{margin:"2rem 0",borderWidth:"1px"}}),r.createElement(z,{style:{justifyContent:"center"}},r.createElement("a",{onClick:function(){l(!1),s(!0)}},"Register Instead")))};V.propTypes={onError:a.func,onSuccess:a.func};var F=["children"],G=n.createContext({}),I=function(e){var t=e.children,o=d(e,F);B(o,"AuthContextProvider");var i=o.currentUser,a=void 0===i?q.anonUser:i,l=o.setCurrentUser,s=o.loginModalOpen,c=void 0!==s&&s,p=o.setLoginModalOpen,m=o.registerModalOpen,f=void 0!==m&&m,h=o.setRegisterModalOpen,g=n.useState(a),v=g[0],y=g[1];l&&(v=a,y=l);var x=n.useState(c),b=x[0],w=x[1];p&&(b=c,w=p);var O=n.useState(f),E=O[0],M=O[1];return h&&(E=f,M=h),r.createElement(G.Provider,{value:u({},o,{currentUser:v,setCurrentUser:y,loginModalOpen:b,setLoginModalOpen:w,registerModalOpen:E,setRegisterModalOpen:M})},t)};I.propTypes={useApi:a.func.isRequired},module.exports=function(){var e=n.useState(!1),o=e[0],i=e[1],a=n.useState(!0);return r.createElement(I,{loginModalOpen:o,setLoginModalOpen:i,registerModalOpen:a[0],setRegisterModalOpen:a[1],useApi:function(){return{doRegister:function(e){return P.post("http://localhost:3001/api/users",{email:e.email,password:e.password}).then(function(e){return e.data}).then(function(e){return B(e,"done registered"),e})}}}},r.createElement(V,null),r.createElement(t.ToastContainer,{position:"bottom-left"}))};
//# sourceMappingURL=TestApp.jsx.js.map
