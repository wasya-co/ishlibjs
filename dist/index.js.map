{"version":3,"file":"index.js","sources":["../src/shared/C.jsx","../src/shared/request.jsx","../src/shared/S.jsx","../src/shared/index.jsx","../src/components/users/AuthWidget.jsx","../src/components/users/LoginModal.jsx","../src/components/users/RegisterModal.jsx","../src/components/users/index.jsx","../src/TestApp.jsx","../src/components/users/JwtContext.jsx","../src/components/users/Scratchpad.jsx","../src/components/SideMenu/index.jsx","../src/index.jsx"],"sourcesContent":["\n/**\n * Constants\n *\n * * C.anonUser\n * * C.current_user\n * * C.jwt_token\n * * C.item_types\n *\n */\nconst C = {\n\n  // A\n  anonUser: {}, // as opposed to null\n\n  // B\n  bottomDrawerOpen: 'bottom-drawer-open', // localStorage\n\n  // C\n  collapsible: {\n    description: \"descr-sec\",\n    extra1: \"extra1-sec\",\n    extra2: \"extra2-sec\",\n    extra3: \"extra3-sec\",\n    map: \"map-sec\",\n    markers: \"markers-sec\",\n  },\n  collapsibles: 'collapsibles', // localStorage\n  current_user: 'current_user',\n\n  // F\n  foldedCenter: 'folded-center',\n  foldedLeft: 'folded-left', // twofoldContext\n  foldedRight: 'folded-right',\n\n  // H\n  horizontal: 'horizontal',\n\n  // I\n  item_types: {\n    gallery: 'Gallery',\n    report: 'Report',\n    video: 'Video',\n  },\n\n  // J\n  jwt_token: 'jwt_token',\n\n  // L\n  layout_onecol: 'onecol',\n  layout_mapui: 'mapui',\n  locations: {\n    earth: 'earth',\n  },\n\n  // M\n  map_panel_types: {\n    Equirectangular: \"Equirectangular\",\n    MapPanel: \"MapPanel\",\n    MapPanelNoZoom: \"MapPanelNoZoom\",\n    ThreePanelV1: \"ThreePanelV1\",\n    ThreePanelV4: \"ThreePanelV4\",\n  },\n\n  // N\n  names: {\n    scratchpad: 'Scratchpad',\n  },\n\n  // R\n  rated: {\n    nc17: 'nc-17',\n  },\n  ratedConfirmation: 'rated-confirmation', // localStorage\n\n  // T\n  theme: 'theme',\n  themes: {\n    dark: 'dark',\n    light: 'light',\n  },\n  twofoldPercent: 'twofold-percent', // localStorage\n\n  // V\n  variants: {\n    bordered: 'bordered', // for Newsitems\n    floating: 'floating', // for main-menu btn\n    inline: 'inline',     // for main-menu btn\n    transparent: 'transparent', // for markers on Right\n  },\n  vertical: 'vertical',\n}\nexport default C\n","\nimport axios from \"axios\"\n\n/*\nimport config from \"config\"\n\nconst settings = {\n  baseURL: config.apiOrigin\n}\n\nexport default axios.create(settings)\n*/\n\nexport default axios.create({})\n","\n/**\n * Style Constants\n */\nconst S = {\n  // Twofold layout\n  borderWidth: '10px',\n  bottomDrawerClosedHeight: '20px',\n  bottomDrawerOpenHeight: '115px',\n  breadcrumbsHeight: '30px',\n\n  thinBorderWidth: '2px',\n  thinBorderRadius: '5px',\n}\n\nconst lightTheme = {\n  ...S,\n  thinBorder: '2px solid black',\n  colors: {\n    text: 'black',\n    background: '#dedede',\n    blue: '#6aa3e9',\n    darkGrey: '#605d5d',\n    lightGrey: '#988b8b',\n    red: 'red',\n    border: 'black',\n    cardBackground: 'white'\n  }\n}\n\nconst darkTheme = {\n  ...S,\n  thinBorder: '2px solid white',\n  colors: {\n    text: 'white',\n    background: '#292929',\n    blue: '#73b0fa',\n    darkGrey: '#b3afaf',\n    lightGrey: '#4a4343',\n    red: '#eb83a8',\n    border: 'white',\n    cardBackground: '#1a1a1a'\n  }\n}\n\nexport default {\n  lightTheme,\n  darkTheme\n}","/*\n *  $shared / index\n */\nimport { arrowBack, closeOutline, } from 'ionicons/icons'\nimport { CircularProgress as _CircularProgress } from '@material-ui/core'\nimport _Box from '@material-ui/core/Box'\nimport {\n  ChevronLeft as _ChevronLeft,\n  ChevronRight as _ChevronRight,\n  Close as _Close,\n  Menu as _MenuIcon,\n} from '@material-ui/icons'\nimport PropTypes from 'prop-types'\nimport React, { useEffect, useState } from 'react'\nimport {\n  Route as _Route, useHistory,\n} from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport C from './C'\n\n/* A */\n\nconst Actions = styled.div`\n\n  // @TODO: this should use variables, for Modal inner size.\n  // I'd need to do dependency injection of the variable, from infiniteshelterjs into ishlibjs.\n  position: fixed; // for GalleriesShow\n  top: 60px;\n  right: 60px;\n\n  display: flex;\n  flex-direction: row-reverse;\n`;\nexport { Actions }\n\n/* B */\n\n/**\n * Back Button\n */\n// const BackIcon = styled(IonIcon)\n// @TODO: reintroduce IonIcon maybe?\nconst BackIcon = styled.div`\n  margin-right: 5px;\n  cursor: pointer;\n`;\nexport const BackBtn = () => {\n  const history = useHistory()\n  return <BackIcon onClick={history.goBack} icon={arrowBack}></BackIcon>\n}\n\n/**\n * Just your regular shadowed box. Pointer cursor. TDD\n */\nexport const Btn = styled.div`\n  border: 1px solid gray;\n  border-radius: 5px;\n  cursor: pointer;\n  display: inline-block;\n  padding: .3em 1em;\n`;\n\n\n/* C */\nexport { default as C } from './C'\nexport const ChevronLeft = styled(_ChevronLeft)`\n  color: ${(p) => p.theme.colors.text}\n`;\nexport const ChevronRight = styled(_ChevronRight)`\n  color: ${(p) => p.theme.colors.text}\n`;\n\n/**\n * Card\n */\nexport const Card = styled(_Box)`\n  margin-bottom: 1em;\n  padding: 1em;\n  background: white;\n  cursor: ${p => p.cursor ? p.cursor : 'auto'};\n\n  display: flex;\n  flex-direction: column;\n`;\n\n/**\n * CloseBtn\n**/\nexport const CloseBtn = ({ children, ...props }) => {\n  return <_Close style={{ cursor: 'pointer', ...props.style }} {...props} />\n};\nCloseBtn.propTypes = {\n  onClick: PropTypes.func.isRequired,\n}\n\n/* D */\n\n/* F */\n\n/**\n * FlexCol\n**/\nconst _FlexCol = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  > * {\n    margin: auto .4em; // @TODO: standardize this size!\n  }\n`;\nexport const FlexCol = ({ children, ...props }) => <_FlexCol className=\"FlexCol\" {...props} >{children}</_FlexCol>\n\n/**\n * FlexRow\n**/\nexport const FlexRow = styled.div`\n  display: flex;\n\n  > * {\n    // margin: auto .4em; // @TODO: why? the LoginModal needs no margins!\n  }\n`;\n\n\n/* I */\n\n/**\n * Like the rails inflector, has methods:\n * tableize()\n */\nexport const inflector = {\n  tableize: (m) => {\n    switch(m) {\n      case 'Gallery':\n        return 'galleries'\n      default:\n      return `${m.toLowerCase()}s`\n    }\n  },\n}\n\n/* L */\n\n\n// From: https://codepen.io/charlyarg/pen/GByKja\nconst _Circle = styled.div`\n  position: fixed;\n  z-index: 999;\n  overflow: show;\n  margin: auto;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  width: 50px;\n  height: 50px;\n`;\nexport const Loading = (p) => <_Circle><_CircularProgress /></_Circle>\n\n/**\n * Usage: logg(someObject, 'label')\n *\n * This development-grade logger can be used instead of console.log() with some advantages:\n * * It encourages consistent labeling of logs. By labeling each log line, you can have dozens of log lines\n * written per action, and still know which log line comes from where.\n * The recommended label is the component name, or function name.\n * * If the label is present, the logged object is placed in the window, allowing you to inspect it in the console. The\n * label becomes the name of the object (stripped to [0-9a-zA-Z\\-_] chars). If you're logging a function, you can execute it.\n * If you log more than one thing, they can interact, allowing you to validate control flow.\n * * the logger can be turned off by making this function simply return.\n */\nconst logg = (a, b=\"\", c=null) => {\n  c = \"string\" === typeof c ? c : b.replace(/\\W/g, \"\");\n  if (c.length > 0 && typeof window !== \"undefined\") {\n    window[c] = a;\n  }\n\n  console.log(`+++ ${b}:`, a); // eslint-disable-line no-console\n};\n// optimized for Android (e.g. it inspects and doesn't use window)\nconst logg2 = (a, b=\"\", c=null) => {\n  console.log(`+++ ${b}:`, a.inspect); // eslint-disable-line no-console\n};\nexport { logg, logg2 };\n\n/* M */\nexport const MenuIcon = styled(_MenuIcon)`\n  color: ${(p) => p.theme.colors.text}\n`;\n\n\nconst _Header = styled.div`\n  flex-grow: 1;\n  text-align: center;\n  font-size: 1.2rem;\n`;\nexport const ModalHeader = ({ children, onClose, ...props }) => {\n  return <FlexRow >\n    <_Header>{children}</_Header>\n    <CloseBtn onClick={onClose} />\n  </FlexRow>\n}\nModalHeader.propTypes = {\n  onClose: PropTypes.func.isRequired,\n}\n\n/* P */\n\n/**\n * pretty print date\n */\nexport const pp_date = (d) => (d || \"\" ).substring(0, 10)\n\n/* R */\n\nexport { default as request } from \"./request\"\n\n/* S */\nexport { default as S } from \"./S\"\n\n/* T */\n\nexport const TwofoldContext = React.createContext({})\nexport const TwofoldContextProvider = ({ children, ...props }) => {\n  // logg(props, 'TwofoldContextProvider')\n  const {\n    currentUser, setCurrentUser,\n    layout, setLayout,\n    loginModalOpen, setLoginModalOpen,\n    theme, toggleTheme,\n    useApi,\n  } = props\n\n  const api = useApi()\n\n  useEffect(() => {\n    let closure = setTimeout(async () => {\n      const result = await api.getMyAccount()\n      setCurrentUser(result)\n    }, 1 * 1000)\n    return () => clearTimeout(closure)\n  }, [currentUser.is_purchasing])\n\n  /* B */\n  // @TODO: does localStorage work like this on mobile?\n  // @TODO: try and catch\n  const [ bottomDrawerOpen, _setBottomDrawerOpen ] = useState(JSON.parse(localStorage.getItem(C.bottomDrawerOpen)))\n  const setBottomDrawerOpen = (m) => {\n    localStorage.setItem(C.bottomDrawerOpen, JSON.stringify(m))\n    _setBottomDrawerOpen(m)\n  }\n\n  /* F */\n  const [ folded, setFolded ] = useState()\n\n  /* I */\n  const [ itemToUnlock, _setItemToUnlock ] = useState({})\n  const setItemToUnlock = (item) => {\n    if (itemToUnlock.id !== item.id && !loginModalOpen) {\n      _setItemToUnlock(item)\n    }\n  }\n\n  /* M */\n  const [ mapPanelWidth, setMapPanelWidth ] = useState(null)\n  const [ mapPanelHeight, setMapPanelHeight ] = useState(null)\n\n  /* P */\n  const [ purchaseModalIsOpen, setPurchaseModalIsOpen ] = useState(false)\n\n  /* R */\n  const [ ratedConfirmation, _setRatedConfirmation ] = useState(JSON.parse(localStorage.getItem(C.ratedConfirmation)))\n  const setRatedConfirmation = (which) => {\n    localStorage.setItem(C.ratedConfirmation, JSON.stringify(which))\n    _setRatedConfirmation(which)\n  }\n\n  /* S */\n  const [ showItem, setShowItem ] = useState(false)\n  const [ showUrl, setShowUrl ] = useState(false)\n\n  /* T */\n  let tmp, defaultTwofoldPercent = 0.5\n  if (tmp = localStorage.getItem(C.twofoldPercent)) {\n    try {\n      defaultTwofoldPercent = JSON.parse(tmp)\n    } catch (err) {\n      logg(err, 'cannot get twofoldPercent from localStorage')\n    }\n  }\n  const [ twofoldPercent, setTwofoldPercent ] = useState(0.5)\n\n  /* Z */\n  const [ zoom, setZoom ] = useState(1)\n\n  return <TwofoldContext.Provider value={{\n    bottomDrawerOpen, setBottomDrawerOpen,\n\n    currentUser, setCurrentUser, // @TODO: move this to an AppWrapper context\n\n    folded, setFolded,\n\n    itemToUnlock, setItemToUnlock,\n\n    layout, setLayout,\n    loginModalOpen, setLoginModalOpen,\n\n    mapPanelHeight, setMapPanelHeight,\n    mapPanelWidth, setMapPanelWidth,\n\n    purchaseModalIsOpen, setPurchaseModalIsOpen,\n\n    ratedConfirmation, setRatedConfirmation,\n\n    showItem, setShowItem,\n    showUrl, setShowUrl,\n\n    twofoldPercent, setTwofoldPercent,\n\n    useApi,\n\n    zoom, setZoom,\n\n    theme, toggleTheme,\n  }} >{ children }</TwofoldContext.Provider>\n}\nTwofoldContextProvider.propTypes = {\n  currentUser: PropTypes.object.isRequired,\n  setCurrentUser: PropTypes.func.isRequired,\n\n  useApi: PropTypes.func.isRequired,\n}\n\n/* U */\nexport { default as useWindowSize } from './useWindowSize'\n\n/* W */\n\n/**\n * Wrapper Bordered. This expects a list? _vp_ 2021-11-02\n * Used in collapsibles and MarkersList\n */\nexport const WBordered = styled.div`\n  border: ${p => p.theme.thinBorder};\n  border-radius: ${p => p.theme.thinBorderRadius};\n  background: ${p => p.theme.colors.cardBackground};\n  padding: .5em;\n\n  margin-bottom: 1em;\n`;\n\n/**\n * Wrapper Bordered Item. Is padded, margined.\n */\nexport const WBorderedItem = styled.div`\n  border: ${p => p.theme.thinBorder};\n  border-radius: ${p => p.theme.thinBorderRadius};\n  background: ${p => p.theme.colors.cardBackground};\n  color: ${p => p.theme.colors.text};\n\n  margin: 0 .5em .5em 0;\n  padding: .5em;\n\n  text-align: center;\n\n  width: 18%;\n  max-width: 140px;\n  min-width: 120px;\n`;\n\n\nexport const WidgetContainer = ({ children, ...props }) => {\n  return <WBordered {...props} >{ children }</WBordered>\n}\n\nexport const Wrapper = styled.div`\n  height: 100vh;\n`;\n\n/* Z */\n\nexport const ZoomContext = React.createContext({})\n\n\n\n","\nimport React, { Fragment as F, useContext, } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nimport {\n  AuthContext, AuthContextProvider,\n  FacebookLogin,\n  LoginModal, LoginWithEmail,\n  RegisterModal, RegisterWithEmail,\n} from \"$components/users\"\n\nimport {\n  Btn,\n  C,\n  FlexCol, FlexRow,\n  logg,\n} from \"$shared\"\n\n\nconst RegisterWithEmailBtn = (props) => {\n  return <Btn {...props} >Register with Email</Btn>\n}\nconst LoginWithEmailBtn = (props) => {\n  return <Btn {...props} >Login with Email</Btn>\n}\n\nconst IconLogout = ({ fill, w, h, ...props }) => {\n  // const theme = useTheme()\n\n  w = w ? w : '12px'\n  h = h ? h : '12px'\n  // fill = fill ? fill : theme.colors.text // @TODO: implement theme in ishlibjs\n  fill = fill ? fill : '#333333'\n\n  return <span {...props} >\n    <svg xmlns=\"http://www.w3.org/2000/svg\"\n      width={w} height={h}\n      viewBox=\"0 0 96.943 96.943\" style={{ enableBackground: 'new 0 0 96.943 96.943' }}\n    ><g><g><path d=\"M61.168,83.92H11.364V13.025H61.17c1.104,0,2-0.896,2-2V3.66c0-1.104-0.896-2-2-2H2c-1.104,0-2,0.896-2,2v89.623 c0,1.104,0.896,2,2,2h59.168c1.105,0,2-0.896,2-2V85.92C63.168,84.814,62.274,83.92,61.168,83.92z\"/> <path d=\"M96.355,47.058l-26.922-26.92c-0.75-0.751-2.078-0.75-2.828,0l-6.387,6.388c-0.781,0.781-0.781,2.047,0,2.828 l12.16,12.162H19.737c-1.104,0-2,0.896-2,2v9.912c0,1.104,0.896,2,2,2h52.644L60.221,67.59c-0.781,0.781-0.781,2.047,0,2.828 l6.387,6.389c0.375,0.375,0.885,0.586,1.414,0.586c0.531,0,1.039-0.211,1.414-0.586l26.922-26.92 c0.375-0.375,0.586-0.885,0.586-1.414C96.943,47.941,96.73,47.433,96.355,47.058z\"/> </g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g></g><g></g><g></g>\n    </svg>\n  </span>\n}\n\n/**\n * If user is logged in, display the email/handle and allow logout.\n * If user is not logged in, allow registration and login via Fb, and email+passwd.\n *\n * @TODO: doesn't seem like this belongs in ishlibjs _vp_ 2022-09-04\n**/\nconst AuthWidget = (props) => {\n  // logg(props, 'AuthWidget')\n\n  const {\n    currentUser, setCurrentUser,\n    doLogout: _doLogout,\n    setLoginModalOpen,\n    setRegisterModalOpen,\n  } = useContext(AuthContext)\n  // logg(useContext(AuthContext), 'AuthWidgetUsedAuthContext')\n\n  // @TODO: doesn't belong here. Should be injected from the host. _vp_ 2022-09-04\n  const doLogout = () => {\n    setCurrentUser(C.anonUser)\n    localStorage.removeItem('jwt_token')\n  }\n\n  if (currentUser?.email) {\n    return <FlexRow>\n      [&nbsp;{currentUser.email}&nbsp;<IconLogout onClick={doLogout} >Logout</IconLogout>&nbsp;]\n    </FlexRow>\n  }\n\n  return <F>\n    <FlexCol>\n      {/* <FacebookLogin /> */}\n      <RegisterWithEmailBtn onClick={() => { setRegisterModalOpen(true) }} />\n      <LoginWithEmailBtn    onClick={() => { setLoginModalOpen(true) }} />\n    </FlexCol>\n\n    <RegisterModal />\n    <LoginModal />\n\n  </F>\n}\nAuthWidget.propTypes = {} // none so far\n\nexport default AuthWidget\n","\nimport React, { Fragment as F, useContext, useState, } from 'react'\nimport Modal from \"react-modal\"\nimport { ToastContainer, toast } from 'react-toastify'\n\nimport styled from 'styled-components'\n\nimport {\n  Btn,\n  C, CloseBtn,\n  FlexCol, FlexRow,\n  logg,\n  ModalHeader,\n  request,\n} from \"$shared\"\nimport {\n  AuthContext, AuthContextProvider,\n} from './'\n\nimport styles from './LoginModal.module.scss'\n\n/**\n * LoginModal\n**/\nconst LoginModal = (props) => {\n  // logg(props, 'LoginModal, ishlibjs')\n\n  const {\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n    registerModalOpen, setRegisterModalOpen,\n    useApi,\n  } = useContext(AuthContext)\n  // logg(useContext(AuthContext), 'LoginModalUsedAuthContext')\n\n  const [ email, setEmail ] = useState('')\n  const [ password, setPassword ] = useState('')\n  const api = useApi()\n\n  // @TODO: this should be injected, right? _vp_ 2022-09-04\n  const doPasswordLogin = async (email, password) => {\n    api.postLogin({ email, password }).then((r) => {\n      setLoginModalOpen(false)\n    }).catch((err) => {\n      logg(err, 'e323 - cannot postLogin()')\n      // setCurrentUser(C.anonUser)\n      toast(\"Could not login.\")\n    })\n  }\n\n  Modal.setAppElement('body')\n\n  return <Modal\n    className={`LoginModal ${styles.LoginModal}`}\n    isOpen={!!loginModalOpen}\n    overlayClassName={styles.LoginModalOverlay}\n    portalClassName={styles.LoginModalPortal}\n  >\n    <ModalHeader onClose={() => setLoginModalOpen(false)} >Login</ModalHeader>\n    { 'string' === typeof loginModalOpen && <FlexRow>\n      <div className={styles.Notice} >{ loginModalOpen }</div>\n    </FlexRow> }\n    <FlexCol>\n      <label htmlFor='email'>Email</label>\n      <input name='email' type='email' value={email} onChange={(e) => setEmail(e.target.value)    } />\n\n      <label htmlFor='password'>Password</label>\n      <input name='password' type='password' value={password} onChange={(e) => setPassword(e.target.value) }\n        onKeyDown={(e) => { if (e.key === 'Enter') { doPasswordLogin(email, password) } }}\n      />\n      <FlexRow style={{\n        flexDirection: 'row-reverse',\n        justifyContent: 'space-between',\n        marginTop: '0.4em',\n      }} >\n        <Btn onClick={() => doPasswordLogin(email, password)}>Login</Btn>\n      </FlexRow>\n    </FlexCol>\n    <hr style={{ margin: '2rem 0', borderWidth: '1px' }} />\n    <FlexRow style={{ justifyContent: 'center' }} >\n      <a onClick={() => setLoginModalOpen(false) || setRegisterModalOpen(true) }>Register Instead</a>\n    </FlexRow>\n  </Modal>\n}\n\nexport default LoginModal\n","\nimport React, { useContext, useState, } from 'react'\nimport Modal from \"react-modal\"\nimport { toast } from 'react-toastify'\nimport PropTypes from 'prop-types'\n\nimport {\n  Btn,\n  C, CloseBtn,\n  FlexCol, FlexRow,\n  ModalHeader,\n  logg,\n} from '$shared'\nimport {\n  AuthContext,\n} from '$components/users'\n\nimport styles from './LoginModal.module.scss'\n\n\n/**\n * RegisterModal\n *\n * Uses LoginModal styling\n**/\nconst RegisterModal = (props) => {\n  // logg(props, 'RegisterModal')\n\n  const {\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n    registerModalOpen, setRegisterModalOpen,\n    useApi,\n  } = useContext(AuthContext)\n  // logg(useContext(AuthContext), 'registerModalUsedContext')\n\n  const api = useApi()\n\n  const [ email, setEmail ] = useState('')\n  const [ password, setPassword ] = useState('')\n  const [ password2, setPassword2 ] = useState('')\n\n  const doRegister = async (email, password, password2) => {\n    if (password !== password2) {\n      toast('Passwords do not match')\n      return\n    }\n    const out = api.doRegister({ email, password })\n\n    out.then((r) => {\n      setRegisterModalOpen(false)\n      setLoginModalOpen(r.message)\n    }).catch((e) => {\n      toast(\"Registration failed\")\n    })\n  }\n\n  return <Modal\n    className={`LoginModal ${styles.LoginModal}`}\n    isOpen={registerModalOpen}\n    overlayClassName={styles.LoginModalOverlay}\n    portalClassName={styles.LoginModalPortal}\n  >\n    <ModalHeader onClose={() => setRegisterModalOpen(false)} >Register</ModalHeader>\n    <FlexCol>\n      <label htmlFor='email'>Email</label>\n      <input type='email'    name='email'     value={email}    onChange={(e) => setEmail(e.target.value)    } />\n\n      <label htmlFor='password'>Password</label>\n      <input type='password' name='password'  value={password} onChange={(e) => setPassword(e.target.value) } />\n\n      <label htmlFor='password2'>Confirm Password</label>\n      <input type='password' name='password2' value={password2} onChange={(e) => setPassword2(e.target.value) } />\n\n      <FlexRow style={{\n        flexDirection: 'row-reverse',\n        justifyContent: 'space-between',\n        marginTop: '0.4em',\n      }} >\n        <Btn className=\"Submit\" onClick={() => doRegister(email, password, password2) }>Register</Btn>\n      </FlexRow>\n      <hr style={{ margin: '2rem 0', borderWidth: '1px' }} />\n      <FlexRow style={{ justifyContent: 'center' }} >\n        <a onClick={() => setLoginModalOpen(true) || setRegisterModalOpen(false) }>Login Instead</a>\n      </FlexRow>\n    </FlexCol>\n  </Modal>\n}\nRegisterModal.propTypes = {} // None so far\n\nexport default RegisterModal\n","\nimport { Plugins } from '@capacitor/core'\nimport React, { createContext, useContext, useState } from 'react'\nimport PropTypes from 'prop-types'\n\nimport {\n  Btn,\n  C,\n  logg,\n} from '$shared'\n\n/* A */\nconst AuthContext = createContext({})\nconst AuthContextProvider = ({children, ...props }) => {\n  logg(props, 'AuthContextProvider')\n  let {\n    currentUser: _currentUser = C.anonUser, setCurrentUser: _setCurrentUser,\n    loginModalOpen: _loginModalOpen = false, setLoginModalOpen: _setLoginModalOpen,\n    registerModalOpen: _registerModalOpen = false, setRegisterModalOpen: _setRegisterModalOpen,\n  } = props\n\n  let [ currentUser, setCurrentUser ] = useState(_currentUser)\n  if (_setCurrentUser) {\n    currentUser = _currentUser\n    setCurrentUser = _setCurrentUser\n  }\n\n  let [ loginModalOpen, setLoginModalOpen ] = useState(_loginModalOpen)\n  if (_setLoginModalOpen) {\n    loginModalOpen = _loginModalOpen\n    setLoginModalOpen = _setLoginModalOpen\n  }\n\n  let [ registerModalOpen, setRegisterModalOpen ] = useState(_registerModalOpen)\n  if (_setRegisterModalOpen) {\n    registerModalOpen = _registerModalOpen\n    setRegisterModalOpen = _setRegisterModalOpen\n  }\n\n  const moreProps = {\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n    registerModalOpen, setRegisterModalOpen,\n  }\n\n  //\n  // props.useApi isRequired\n  //\n  return <AuthContext.Provider value={{ ...props, ...moreProps }} >\n    { children }\n  </AuthContext.Provider>\n}\nAuthContextProvider.propTypes = {\n  useApi: PropTypes.func.isRequired,\n}\n\nexport {\n  AuthContext, AuthContextProvider,\n}\nexport { default as AuthWidget } from './AuthWidget'\n\n/* F */\nconst { FacebookLogin: _FacebookLogin } = Plugins\n\nconst FACEBOOK_PERMISSIONS = ['email']\n\n/* J */\n\n\n\n/* L */\nexport { default as LoginModal } from \"./LoginModal\"\n\n/* R */\nexport { default as RegisterModal } from \"./RegisterModal\"\n\n\n","\nimport React, { useState, } from 'react'\nimport { toast, ToastContainer } from 'react-toastify'\n\n// import 'react-toastify/dist/ReactToastify.css' // @TODO: re-add somehow nicer.\n\nimport {\n  logg,\n  request,\n} from \"$shared\"\nimport {\n  AuthWidget,\n  AuthContextProvider,\n  LoginModal,\n } from './components/users'\n\nconst config = {\n  apiOrigin: 'http://localhost:3001',\n}\n\nconst TestApp = () => {\n\n  const useApi = () => ({\n    doRegister: ({ email, password }) => {\n      return request.post(`${config.apiOrigin}/api/users`, { email, password }).then((r) => r.data).then((r) => {\n        logg(r, 'done registered')\n        return r\n      })\n    },\n  })\n\n  const [ loginModalOpen, setLoginModalOpen ] = useState(false) // useState(\"Please login!\")\n  const [ registerModalOpen, setRegisterModalOpen ] = useState(true) // useState(\"Please register\")\n\n  return <AuthContextProvider {...{\n    loginModalOpen, setLoginModalOpen,\n    registerModalOpen, setRegisterModalOpen,\n    useApi,\n  }} >\n\n    {/* <LoginModal /> */}\n    <AuthWidget />\n\n    <ToastContainer position=\"bottom-left\" />\n  </AuthContextProvider>\n}\nexport default TestApp\n","\nimport PropTypes from 'prop-types'\nimport React, { useContext, useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport { toast } from 'react-toastify'\n\nimport {\n  Btn,\n  C,\n  logg,\n} from \"$shared\"\n\nexport const JwtContext = React.createContext({})\n\n/**\n * JwtContextProvider\n**/\nconst JwtContextProvider = ({ children, ...props }) => {\n  logg(props, 'JwtContextProvider 222')\n  const {\n    api,\n  } = props\n\n  // const maybeUser = JSON.parse(localStorage.getItem(C.current_user)) || C.anonUser\n  const [ currentUser, setCurrentUser ] = useState(C.anonUser)\n  const [ loginModalOpen, setLoginModalOpen ] = useState({})\n\n  // call to verify creds\n  useEffect(() => {\n    logg('setting currentUser...')\n\n    // request.get(`${config.apiOrigin}${config.routes.myAccountPath}`).then((r) => r.data).then((resp) => {\n    api.getMyAccount().then((resp) => {\n      logg(resp, 'got this resp')\n\n      // localStorage.setItem(C.current_user, JSON.stringify(resp))\n      setCurrentUser(resp) // must be done *after* setting C.jwt_token\n    }).catch((e) => {\n      logg(e, 'e322')\n      toast(`Login failed: ${e}`)\n      setCurrentUser(C.anonUser)\n      // localStorage.removeItem(C.current_user)\n      // localStorage.removeItem(C.jwt_token)\n    })\n  }, [])\n\n  return <JwtContext.Provider value={{\n    api,\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n  }} >{ children }</JwtContext.Provider>\n}\nJwtContextProvider.props = {\n  api: PropTypes.object,\n}\nexport { JwtContextProvider }\n\n// @TODO: move to shared?\nconst FlexRow = styled.div`\n  display: flex;\n\n  > * {\n    margin: auto .4em;\n  }\n`;\n\nconst W1 = styled.div`\n  border: 1px solid red;\n`;\n\nconst W2 = styled.div`\n  display: flex;\n`;\n\nexport const SimpleJwtRow = () => {\n  const {\n    api,\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n  } = useContext(JwtContext)\n  // logg(useContext(JwtContext), 'SimpleJwtRowUsedJwtContext')\n\n  return <W1>\n    <FlexRow>\n      { /* <FbLogin /> */ }\n      { currentUser.email && <W2>\n        <i>{currentUser.email}</i>\n        <Logout />\n      </W2>}\n      { !currentUser.email && <LoginWithPassword /> }\n    </FlexRow>\n  </W1>\n}\n\n\n\nconst _W = styled.div`\n  display: flex;\n\n  > * {\n    // margin: auto .4em;\n  }\n`;\n\n// // @TODO: is this obsolete and unused?\n// // _vp_ 2022-09-01\n// export const LoginWithPassword = (props) => {\n//   // logg(useContext(JwtContext), 'useContext(JwtContext)')\n//   const {\n//     api,\n//     currentUser, setCurrentUser,\n//     loginModalOpen, setLoginModalOpen,\n//   } = useContext(JwtContext)\n//   const [ email, setEmail ] = useState('')\n//   const [ password, setPassword ] = useState('')\n//   const doPasswordLogin = async (email, password) => {\n//     // logg(`${config.apiOrigin}${config.routes.loginWithPasswordPath}`, 'doPasswordLogin')\n//     // request.post(`${config.apiOrigin}${config.routes.loginWithPasswordPath}`, { email, password }).then((r) => r.data\n//     api.postLoginWithPassword({ email, password }).then((resp) => {\n//       localStorage.setItem(C.jwt_token, resp.jwt_token)\n//       // localStorage.setItem(C.current_user, JSON.stringify(resp))\n//       setCurrentUser(resp) // must be done *after* setting C.jwt_token\n//       setLoginModalOpen(false)\n//     }).catch((e) => {\n//       logg(e, 'e322')\n//       // toast(\"Login failed\")\n//       setCurrentUser(C.anonUser)\n//     })\n//   }\n//   return <_W>\n//     <input type='email' value={email} onChange={(e) => setEmail(e.target.value) } /><br />\n//     <input type='password' value={password} onChange={(e) => setPassword(e.target.value) }\n//       onKeyDown={(e) => {\n//         if (e.key === 'Enter') { doPasswordLogin(email, password) }\n//       }}\n//     />\n//     <Btn onClick={() => doPasswordLogin(email, password)}>Login</Btn>\n//   </_W>\n// }\n\n\nexport const Logout = () => {\n  const { currentUser, setCurrentUser } = useContext(JwtContext)\n  const doLogout = () => {\n    localStorage.removeItem(C.jwt_token)\n    // localStorage.removeItem(C.current_user)\n    setCurrentUser({})\n  }\n  return <Btn onClick={doLogout}>Logout</Btn>\n}\n","\nimport React, { Fragment as F, useContext, useState } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nimport {\n  AuthContext,\n} from '$components/users'\nimport {\n  Actions,\n  Btn,\n  C,\n  logg,\n} from '$shared'\n\nconst W0 = styled.div`\n`;\n\n\n/**\n * A single text area that saves locally and in the cloud.\n */\nconst Scratchpad = (props) => {\n  // logg(props, 'Scratchpad')\n\n  const {\n    useApi,\n  } = useContext(AuthContext)\n\n  const api = useApi()\n\n  const [ txt, setTxt ] = useState(localStorage.getItem(C.names.scratchpad) || '')\n\n  const doSave = () => {\n    localStorage.setItem(C.names.scratchpad, txt)\n    api.postProfile({ scratchpad: txt }).then((data) => {\n      // toast('Updated profile.')\n    }).catch((err) => {\n      logg('Cannot update profile:', err)\n      // toast('e54 - Cannot update profile.')\n    })\n  }\n\n  return <W0>\n    <textarea name='scratchpad' rows='20' cols='40'\n      onChange={(e) => setTxt(e.target.value) }\n      value={txt}\n    / >\n    <Actions>\n      <Btn onClick={doSave}>Save</Btn>\n    </Actions>\n  </W0>\n}\nScratchpad.propTypes = {\n  // none so far\n}\n\nexport default Scratchpad\n","import { IonApp, IonButtons, IonMenuButton } from '@ionic/react'\nimport Drawer from '@material-ui/core/Drawer'\nimport Fab from '@material-ui/core/Fab'\nimport IconButton from '@material-ui/core/IconButton'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport PropTypes from 'prop-types'\nimport React, { Fragment as F, useContext, useEffect, useState } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport {\n  C,\n  logg,\n  MenuIcon,\n} from \"$shared\"\n\nconst W0 = styled.div`\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-content: space-between;\n`;\n\n\nconst SideMenu = ({ children, ...props }) => {\n  const { listItems } = props\n  // logg(props, 'SideMenu')\n\n  const [ drawerOpen, setDrawerOpen ] = React.useState(false)\n  const [ loading, setLoading ] = useState(false)\n  const history = useHistory()\n\n  return <F>\n\n    { /* @TODO: probably remove from here, too many variations of the button, it gotta be separate */ }\n    { props.variant === C.variants.floating ?\n      <Fab onClick={() => setDrawerOpen(true)} style={{ position: 'absolute', top: 0, left: 0, margin: '.5em', zIndex: 1 }} aria-label='main menu'><MenuIcon /></Fab>\n      : <MenuIcon onClick={() => setDrawerOpen(true)} /> }\n\n    <Drawer anchor={\"left\"} open={drawerOpen} onClose={() => setDrawerOpen(false)} >\n      <W0>\n        <List>\n\n          { listItems.map( ({ label, key, path }) => <ListItem button key={key}\n            onClick={() => {\n              setDrawerOpen(false)\n              history.push(path())\n            } } >{ label }\n          </ListItem> )}\n\n        </List>\n\n        { children }\n      </W0>\n    </Drawer>\n\n  </F>\n}\n\nSideMenu.propTypes = {\n  listItems: PropTypes.array.isRequired, // @TODO: specify: key, label, path\n  variant: PropTypes.string,\n}\nexport default SideMenu\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport {\n  logg,\n} from \"./shared\"\nimport TestApp from './TestApp'\n\n// @TODO: rename\nimport * as jwtManager from './components/users/JwtContext' // this syntax is correct\n\n/* A */\nexport { Actions, } from './shared'\nexport { AuthContext, AuthContextProvider, } from './components/users'\nexport { default as AuthWidget } from \"./components/users/AuthWidget\"\n\n/* C */\nexport { CloseBtn } from './shared'\n\n/* F */\nexport { FlexCol, FlexRow } from \"./shared\"\n\n/* J */\nexport { jwtManager }\n\n/* L */\nexport { logg }\nexport { LoginModal } from './components/users'\n\n/* P */\n\n/* R */\nexport { RegisterModal } from './components/users'\n\n/* S */\nexport { default as Scratchpad } from \"./components/users/Scratchpad\"\nexport { default as SideMenu } from './components/SideMenu'\n\nif (process.env.REACT_APP_SERVE) {\n  ReactDOM.render(<TestApp />, document.getElementById('root'))\n}\n"],"names":["C","anonUser","bottomDrawerOpen","collapsible","description","extra1","extra2","extra3","map","markers","collapsibles","current_user","foldedCenter","foldedLeft","foldedRight","horizontal","item_types","gallery","report","video","jwt_token","layout_onecol","layout_mapui","locations","earth","map_panel_types","Equirectangular","MapPanel","MapPanelNoZoom","ThreePanelV1","ThreePanelV4","names","scratchpad","rated","nc17","ratedConfirmation","theme","themes","dark","light","twofoldPercent","variants","bordered","floating","inline","transparent","vertical","axios","create","S","borderWidth","bottomDrawerClosedHeight","bottomDrawerOpenHeight","breadcrumbsHeight","thinBorderWidth","thinBorderRadius","lightTheme","thinBorder","colors","text","background","blue","darkGrey","lightGrey","red","border","cardBackground","darkTheme","Actions","styled","div","BackIcon","Btn","ChevronLeft","_ChevronLeft","p","ChevronRight","_ChevronRight","Card","_Box","cursor","CloseBtn","props","React","_Close","style","propTypes","onClick","PropTypes","func","isRequired","_FlexCol","FlexCol","children","FlexRow","_Circle","logg","a","b","c","replace","length","window","console","log","MenuIcon","_MenuIcon","_Header","ModalHeader","onClose","TwofoldContext","createContext","WBordered","WBorderedItem","Wrapper","ZoomContext","RegisterWithEmailBtn","LoginWithEmailBtn","IconLogout","w","h","enableBackground","AuthWidget","useContext","AuthContext","currentUser","setCurrentUser","_doLogout","setLoginModalOpen","setRegisterModalOpen","doLogout","localStorage","removeItem","email","F","LoginModal","loginModalOpen","registerModalOpen","useApi","useState","setEmail","password","setPassword","api","doPasswordLogin","postLogin","then","r","catch","err","toast","Modal","setAppElement","styles","LoginModalOverlay","LoginModalPortal","Notice","e","target","value","key","flexDirection","justifyContent","marginTop","margin","RegisterModal","password2","setPassword2","doRegister","out","message","AuthContextProvider","_currentUser","_setCurrentUser","_loginModalOpen","_setLoginModalOpen","_registerModalOpen","_setRegisterModalOpen","moreProps","config","apiOrigin","TestApp","request","post","data","ToastContainer","JwtContext","JwtContextProvider","useEffect","getMyAccount","resp","object","W1","W2","SimpleJwtRow","_W","Logout","W0","Scratchpad","getItem","txt","setTxt","doSave","setItem","postProfile","SideMenu","listItems","drawerOpen","setDrawerOpen","history","useHistory","variant","position","top","left","zIndex","label","path","push","array","string","process","env","REACT_APP_SERVE","ReactDOM","render","document","getElementById"],"mappings":"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"}