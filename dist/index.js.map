{"version":3,"file":"index.js","sources":["../src/shared/C.jsx","../src/components/users/AuthWidget.jsx","../src/components/users/LoginModal.jsx","../src/components/users/RegisterModal.jsx","../src/components/users/index.jsx","../src/shared/request.jsx","../src/shared/S.jsx","../src/shared/index.jsx","../src/components/users/JwtContext.jsx","../src/components/users/PasswordLogin.jsx","../src/components/users/Scratchpad.jsx"],"sourcesContent":["\n/**\n * Constants\n *\n * * C.anonUser\n * * C.current_user\n * * C.jwt_token\n * * C.item_types\n *\n */\nconst C = {\n\n  // A\n  anonUser: {}, // as opposed to null\n\n  // B\n  bottomDrawerOpen: 'bottom-drawer-open', // localStorage\n\n  // C\n  collapsible: {\n    description: \"descr-sec\",\n    extra1: \"extra1-sec\",\n    extra2: \"extra2-sec\",\n    extra3: \"extra3-sec\",\n    map: \"map-sec\",\n    markers: \"markers-sec\",\n  },\n  collapsibles: 'collapsibles', // localStorage\n  current_user: 'current_user',\n\n  // F\n  foldedCenter: 'folded-center',\n  foldedLeft: 'folded-left', // twofoldContext\n  foldedRight: 'folded-right',\n\n  // H\n  horizontal: 'horizontal',\n\n  // I\n  item_types: {\n    gallery: 'Gallery',\n    report: 'Report',\n    video: 'Video',\n  },\n\n  // J\n  jwt_token: 'jwt_token',\n\n  // L\n  layout_onecol: 'onecol',\n  layout_mapui: 'mapui',\n  locations: {\n    earth: 'earth',\n  },\n\n  // M\n  map_panel_types: {\n    Equirectangular: \"Equirectangular\",\n    MapPanel: \"MapPanel\",\n    MapPanelNoZoom: \"MapPanelNoZoom\",\n    ThreePanelV1: \"ThreePanelV1\",\n    ThreePanelV4: \"ThreePanelV4\",\n  },\n\n  // N\n  names: {\n    scratchpad: 'Scratchpad',\n  },\n\n  // R\n  rated: {\n    nc17: 'nc-17',\n  },\n  ratedConfirmation: 'rated-confirmation', // localStorage\n\n  // T\n  theme: 'theme',\n  themes: {\n    dark: 'dark',\n    light: 'light',\n  },\n  twofoldPercent: 'twofold-percent', // localStorage\n\n  // V\n  variants: {\n    bordered: 'bordered', // for Newsitems\n    floating: 'floating', // for main-menu btn\n    inline: 'inline',     // for main-menu btn\n    transparent: 'transparent', // for markers on Right\n  },\n  vertical: 'vertical',\n}\nexport default C\n","\nimport React, { Fragment as F, useContext, } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nimport {\n  AuthContext, AuthContextProvider,\n  FacebookLogin,\n  LoginModal, LoginWithEmail,\n  RegisterModal, RegisterWithEmail,\n} from \"$components/users\"\n\nimport {\n  Btn,\n  C,\n  FlexCol, FlexRow,\n\n  logg,\n} from \"$shared\"\n\n\nconst RegisterWithEmailBtn = (props) => {\n  return <Btn {...props} >Register with Email</Btn>\n}\nconst LoginWithEmailBtn = (props) => {\n  return <Btn {...props} >Login with Email</Btn>\n}\n\n\n/**\n * If user is logged in, display the email/handle and allow logout.\n * If user is not logged in, allow registration and login via Fb, and email+passwd.\n**/\nconst AuthWidget = (props) => {\n  logg(props, 'AuthWidget')\n\n  const {\n    currentUser, setCurrentUser,\n    setLoginModalOpen,\n    setRegisterModalOpen,\n  } = useContext(AuthContext)\n  logg(useContext(AuthContext), 'AuthWidgetUsedContext')\n\n  // @TODO: does this belong here?\n  const doLogout = () => {\n    setCurrentUser(JSON.stringify(C.anonUser))\n  }\n\n  if (currentUser?.email) {\n    return <FlexRow>\n      [{currentUser.email} <Btn onClick={doLogout} >Logout</Btn> ]\n    </FlexRow>\n  }\n\n  return <F>\n    <FlexCol>\n      <FacebookLogin />\n      <RegisterWithEmailBtn onClick={() => {\n        setRegisterModalOpen(true)\n      }} />\n      <LoginWithEmailBtn onClick={() => {\n        setLoginModalOpen(true)\n      }} />\n    </FlexCol>\n\n    <RegisterModal />\n    <LoginModal />\n\n  </F>\n};\nAuthWidget.propTypes = {\n  // none so far\n}\n\nexport default AuthWidget\n","\n/*\n * components / users / PasswordLoginModal\n */\nimport React, { Fragment as F, useContext, useState, } from 'react'\nimport Modal from \"react-modal\"\nimport { ToastContainer, toast } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\nimport styled from 'styled-components'\n\nimport {\n  Btn,\n  C,\n  FlexCol,\n  logg,\n  request,\n} from \"$shared\"\nimport {\n  AuthContext, AuthContextProvider,\n} from './'\n\n/**\n * LoginModal\n**/\nconst LoginModal = (props) => {\n  // logg(props, 'LoginModal')\n\n  const {\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n    useApi,\n  } = useContext(AuthContext)\n  // logg(useContext(TwofoldContext), 'LoginModalUsedContext')\n\n  const [ email, setEmail ] = useState('')\n  const [ password, setPassword ] = useState('')\n  const api = useApi()\n\n  const doPasswordLogin = async (email, password) => {\n    api.postLogin({ email, password }).then((r) => {\n      setLoginModalOpen(false)\n      toast('Login Successful.')\n    }).catch((err) => {\n      logg(e, 'e323')\n      toast(\"Login failed\")\n      setCurrentUser(C.anonUser)\n    })\n  }\n\n  return <Modal isOpen={loginModalOpen} >\n    <div onClick={() => setLoginModalOpen(false)} >[x]</div>\n    <FlexCol>\n      <input type='email'    value={email}    onChange={(e) => setEmail(e.target.value)    } /><br />\n      <input type='password' value={password} onChange={(e) => setPassword(e.target.value) }\n        onKeyDown={(e) => { if (e.key === 'Enter') { doPasswordLogin(email, password) } }}\n      />\n      <Btn onClick={() => doPasswordLogin(email, password)}>Password Login</Btn>\n    </FlexCol>\n  </Modal>\n}\n\nexport default LoginModal\n","\nimport React, { useContext, useState, } from 'react'\nimport Modal from \"react-modal\"\n\nimport {\n  AuthContext,\n  Btn,\n  FlexCol, FlexRow,\n  logg,\n} from '$shared'\n\nconst RegisterModal = (props) => {\n  // logg(props, 'RegisterModal')\n\n  const {\n    currentUser, setCurrentUser,\n    registerModalOpen, setRegisterModalOpen,\n    useApi,\n  } = useContext(AuthContext)\n  // logg(useContext(AuthContext), 'registerModalUsedContext')\n\n  const api = useApi()\n  const [ email, setEmail ] = useState('')\n  const [ password, setPassword ] = useState('')\n  const [ password2, setPassword2 ] = useState('')\n\n  const doRegister = async (email, password, password2) => {\n    if (password !== password2) {\n      return toast('Passwords do not match')\n    }\n    api.doRegister({ email, password }).then((r) => {\n      logg(r, 'registered')\n      localStorage.setItem(C.jwt_token, r.jwt_token)\n      localStorage.setItem(C.current_user, JSON.stringify(r))\n      setCurrentUser(r)\n      setRegisterModalOpen(false)\n    }).catch((e) => {\n      logg(e, 'e322')\n      toast(\"Registration failed\")\n    })\n  }\n\n  return <Modal style={{ zIndex: 3 }} isOpen={registerModalOpen} >\n    <div onClick={() => setRegisterModalOpen(false)}>[x]</div>\n    <FlexCol>\n      <label for='email'>Email</label>\n      <input type='email'    name='email'     value={email}    onChange={(e) => setEmail(e.target.value)    } />\n\n      <label for='password'>Password</label>\n      <input type='password' name='password'  value={password} onChange={(e) => setPassword(e.target.value) } />\n\n      <label for='password2'>Confirm Password</label>\n      <input type='password' name='password2' value={password2} onChange={(e) => setPassword2(e.target.value) } />\n\n      <FlexRow>\n        <Btn onClick={() => doRegister(email, password, password2) }>Register</Btn>\n        <Btn onClick={() => setRegisterModalOpen(false) }>Cancel</Btn>\n      </FlexRow>\n    </FlexCol>\n  </Modal>\n}\n\nexport default RegisterModal\n","\nimport { Plugins } from '@capacitor/core'\nimport React, { createContext, useContext, useState } from 'react'\n\nimport {\n  Btn,\n  C,\n  logg,\n} from '$shared'\n\n/* A */\nconst AuthContext = createContext({})\nconst AuthContextProvider = ({children, ...props }) => {\n  let { currentUser, setCurrentUser } = props\n  // logg(props, 'AuthContextProvider')\n\n  let defaultUser = localStorage.getItem(C.current_user)\n  logg(defaultUser, 'defaultUser')\n  defaultUser = defaultUser ? JSON.parse(defaultUser) : C.anonUser\n  logg(defaultUser, 'defaultUser')\n\n  const [ localCurrentUser, _setCurrentUser ] = useState(defaultUser)\n  const setLocalCurrentUser = (user) => {\n    localStorage.setItem(C.jwt_token, user.jwt_token)\n    localStorage.setItem(C.current_user, JSON.stringify(user))\n    _setCurrentUser(user)\n  }\n  if (!currentUser) {\n    currentUser = localCurrentUser\n    setCurrentUser = setLocalCurrentUser\n  }\n  logg(currentUser, 'currentUser III')\n\n  // @TODO: make these also cascading from the props\n  const [ loginModalOpen, setLoginModalOpen ] = useState(false)\n  const [ registerModalOpen, setRegisterModalOpen ] = useState(false)\n  const moreProps = {\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n    registerModalOpen, setRegisterModalOpen,\n  }\n\n  return <AuthContext.Provider value={{ ...props, ...moreProps }} >\n    { children }\n  </AuthContext.Provider>\n}\n\nexport {\n  AuthContext, AuthContextProvider,\n}\nexport { default as AuthWidget } from './AuthWidget'\n\n\n/* F */\nconst { FacebookLogin: _FacebookLogin } = Plugins\n\nconst FACEBOOK_PERMISSIONS = ['email']\n\n\n/**\n * FacebookLogin\n**/\nexport const FacebookLogin = (props) => {\n\n  const {\n    currentUser, setCurrentUser,\n    useApi,\n  } = useContext(AuthContext)\n\n  const api = useApi()\n\n  const doFbLogin = async () => {\n    const result = await _FacebookLogin.login({ permissions: FACEBOOK_PERMISSIONS });\n    if (result.accessToken) {\n      request.post(`${config.apiOrigin}${api.longTermTokenPath}`, { accessToken: result.accessToken.token }).then((resp) => {\n        localStorage.setItem(C.jwt_token, resp.data.jwt_token)\n        localStorage.setItem(C.current_user, JSON.stringify(resp.data) )\n        setCurrentUser(resp.data)\n      }).catch((err) => {\n        logg(err, `Could not post request to ${config.apiOrigin}${api.longTermTokenPath}`)\n      })\n    } else {\n      // Canceled by user.\n      logg('canceled')\n    }\n  }\n  return <Btn onClick={doFbLogin}>Login or Register with Facebook</Btn>\n}\n\n/* L */\nexport { default as LoginModal } from \"./LoginModal\"\n\n/* R */\nexport { default as RegisterModal } from \"./RegisterModal\"\n\n\n","\nimport axios from \"axios\"\n\n/*\nimport config from \"config\"\n\nconst settings = {\n  baseURL: config.apiOrigin\n}\n\nexport default axios.create(settings)\n*/\n\nexport default axios.create({})\n","\n/**\n * Style Constants\n */\nconst S = {\n  // Twofold layout\n  borderWidth: '10px',\n  bottomDrawerClosedHeight: '20px',\n  bottomDrawerOpenHeight: '115px',\n  breadcrumbsHeight: '30px',\n\n  thinBorderWidth: '2px',\n  thinBorderRadius: '5px',\n}\n\nconst lightTheme = {\n  ...S,\n  thinBorder: '2px solid black',\n  colors: {\n    text: 'black',\n    background: '#dedede',\n    blue: '#6aa3e9',\n    darkGrey: '#605d5d',\n    lightGrey: '#988b8b',\n    red: 'red',\n    border: 'black',\n    cardBackground: 'white'\n  }\n}\n\nconst darkTheme = {\n  ...S,\n  thinBorder: '2px solid white',\n  colors: {\n    text: 'white',\n    background: '#292929',\n    blue: '#73b0fa',\n    darkGrey: '#b3afaf',\n    lightGrey: '#4a4343',\n    red: '#eb83a8',\n    border: 'white',\n    cardBackground: '#1a1a1a'\n  }\n}\n\nexport default {\n  lightTheme,\n  darkTheme\n}","/*\n *  $shared / index\n */\n// alphabetized\nimport { arrowBack } from 'ionicons/icons'\n// import { IonIcon } from '@ionic/react'\nimport { CircularProgress as _CircularProgress } from '@material-ui/core'\nimport _Box from '@material-ui/core/Box'\nimport { ChevronLeft as _ChevronLeft, ChevronRight as _ChevronRight, Menu as _MenuIcon, } from '@material-ui/icons'\nimport PropTypes from 'prop-types'\nimport React, { useEffect, useState } from 'react'\nimport {\n  Link, Switch, BrowserRouter as Router, Redirect, Route as _Route, useHistory, withRouter\n} from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport C from './C'\nimport { AuthContext, AuthContextProvider, } from '$components/users'\n\n/* A */\nexport { AuthContext, AuthContextProvider, }\n\n/* B */\n\n/**\n * Back Button\n */\n// const BackIcon = styled(IonIcon)\n// @TODO: reintroduce IonIcon maybe?\nconst BackIcon = styled.div`\n  margin-right: 5px;\n  cursor: pointer;\n`;\nexport const BackBtn = () => {\n  const history = useHistory()\n  return <BackIcon onClick={history.goBack} icon={arrowBack}></BackIcon>\n}\n\n/**\n * Just your regular shadowed box. Pointer cursor. TDD\n */\nexport const Btn = styled.div`\n  border: 1px solid gray;\n  border-radius: 5px;\n  cursor: pointer;\n  display: inline-block;\n  padding: .3em 1em;\n`;\n\n\n/* C */\nexport { default as C } from './C'\nexport const ChevronLeft = styled(_ChevronLeft)`\n  color: ${(p) => p.theme.colors.text}\n`;\nexport const ChevronRight = styled(_ChevronRight)`\n  color: ${(p) => p.theme.colors.text}\n`;\n\n/**\n * A Card\n */\nexport const Card = styled(_Box)`\n  margin-bottom: 1em;\n  padding: 1em;\n  background: white;\n  cursor: ${p => p.cursor ? p.cursor : 'auto'};\n\n  display: flex;\n  flex-direction: column;\n`;\n\n\n/* D */\n\n/* F */\n\nconst _FlexCol = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  > * {\n    margin: auto .4em;\n  }\n`;\n\n/**\n * FlexCol\n**/\nexport const FlexCol = ({ children, ...props }) => <_FlexCol className=\"FlexCol\" {...props} >{children}</_FlexCol>\n\n/**\n * FlexRow\n**/\nexport const FlexRow = styled.div`\n  display: flex;\n\n  > * {\n    margin: auto .4em;\n  }\n`;\n\n\n/* I */\n\n/**\n * Like the rails inflector, has methods:\n * tableize()\n */\nexport const inflector = {\n  tableize: (m) => {\n    switch(m) {\n      case 'Gallery':\n        return 'galleries'\n      default:\n      return `${m.toLowerCase()}s`\n    }\n  },\n}\n\n/* L */\n\n\n// From: https://codepen.io/charlyarg/pen/GByKja\nconst _Circle = styled.div`\n  position: fixed;\n  z-index: 999;\n  overflow: show;\n  margin: auto;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  width: 50px;\n  height: 50px;\n`;\nexport const Loading = (p) => <_Circle><_CircularProgress /></_Circle>\n\n/**\n * Usage: logg(someObject, 'label')\n *\n * This development-grade logger can be used instead of console.log() with some advantages:\n * * It encourages consistent labeling of logs. By labeling each log line, you can have dozens of log lines\n * written per action, and still know which log line comes from where.\n * The recommended label is the component name, or function name.\n * * If the label is present, the logged object is placed in the window, allowing you to inspect it in the console. The\n * label becomes the name of the object (stripped to [0-9a-zA-Z\\-_] chars). If you're logging a function, you can execute it.\n * If you log more than one thing, they can interact, allowing you to validate control flow.\n * * the logger can be turned off by making this function simply return.\n */\nconst logg = (a, b=\"\", c=null) => {\n  c = \"string\" === typeof c ? c : b.replace(/\\W/g, \"\");\n  if (c.length > 0) {\n    window[c] = a;\n  }\n\n  console.log(`+++ ${b}:`, a); // eslint-disable-line no-console\n};\n// optimized for Android (e.g. it inspects and doesn't use window)\nconst logg2 = (a, b=\"\", c=null) => {\n  console.log(`+++ ${b}:`, a.inspect); // eslint-disable-line no-console\n};\nexport { logg, logg2 };\n\n/* M */\nexport const MenuIcon = styled(_MenuIcon)`\n  color: ${(p) => p.theme.colors.text}\n`;\n\n/* P */\n\n/**\n * pretty print date\n */\nexport const pp_date = (d) => (d || \"\" ).substring(0, 10)\n\n/* R */\n\nexport { default as request } from \"./request\"\n\n/* S */\nexport { default as S } from \"./S\"\n\n/* T */\n\nexport const TwofoldContext = React.createContext({})\nexport const TwofoldContextProvider = ({ children, ...props }) => {\n  // logg(props, 'TwofoldContextProvider')\n  const {\n    currentUser, setCurrentUser,\n    layout, setLayout,\n    loginModalOpen, setLoginModalOpen,\n    theme, toggleTheme,\n    useApi,\n  } = props\n\n  const api = useApi()\n\n  useEffect(() => {\n    let closure = setTimeout(async () => {\n      const result = await api.getMyAccount()\n      setCurrentUser(result)\n    }, 1 * 1000)\n    return () => clearTimeout(closure)\n  }, [currentUser.is_purchasing])\n\n  /* B */\n  // @TODO: does localStorage work like this on mobile?\n  // @TODO: try and catch\n  const [ bottomDrawerOpen, _setBottomDrawerOpen ] = useState(JSON.parse(localStorage.getItem(C.bottomDrawerOpen)))\n  const setBottomDrawerOpen = (m) => {\n    localStorage.setItem(C.bottomDrawerOpen, JSON.stringify(m))\n    _setBottomDrawerOpen(m)\n  }\n\n  /* F */\n  const [ folded, setFolded ] = useState()\n\n  /* I */\n  const [ itemToUnlock, _setItemToUnlock ] = useState({})\n  const setItemToUnlock = (item) => {\n    if (itemToUnlock.id !== item.id && !loginModalOpen) {\n      _setItemToUnlock(item)\n    }\n  }\n\n  /* M */\n  const [ mapPanelWidth, setMapPanelWidth ] = useState(null)\n  const [ mapPanelHeight, setMapPanelHeight ] = useState(null)\n\n  /* P */\n  const [ purchaseModalIsOpen, setPurchaseModalIsOpen ] = useState(false)\n\n  /* R */\n  const [ ratedConfirmation, _setRatedConfirmation ] = useState(JSON.parse(localStorage.getItem(C.ratedConfirmation)))\n  const setRatedConfirmation = (which) => {\n    localStorage.setItem(C.ratedConfirmation, JSON.stringify(which))\n    _setRatedConfirmation(which)\n  }\n\n  /* S */\n  const [ showItem, setShowItem ] = useState(false)\n  const [ showUrl, setShowUrl ] = useState(false)\n\n  /* T */\n  let tmp, defaultTwofoldPercent = 0.5\n  if (tmp = localStorage.getItem(C.twofoldPercent)) {\n    try {\n      defaultTwofoldPercent = JSON.parse(tmp)\n    } catch (err) {\n      logg(err, 'cannot get twofoldPercent from localStorage')\n    }\n  }\n  const [ twofoldPercent, setTwofoldPercent ] = useState(0.5)\n\n  /* Z */\n  const [ zoom, setZoom ] = useState(1)\n\n  return <TwofoldContext.Provider value={{\n    bottomDrawerOpen, setBottomDrawerOpen,\n\n    currentUser, setCurrentUser, // @TODO: move this to an AppWrapper context\n\n    folded, setFolded,\n\n    itemToUnlock, setItemToUnlock,\n\n    layout, setLayout,\n    loginModalOpen, setLoginModalOpen,\n\n    mapPanelHeight, setMapPanelHeight,\n    mapPanelWidth, setMapPanelWidth,\n\n    purchaseModalIsOpen, setPurchaseModalIsOpen,\n\n    ratedConfirmation, setRatedConfirmation,\n\n    showItem, setShowItem,\n    showUrl, setShowUrl,\n\n    twofoldPercent, setTwofoldPercent,\n\n    useApi,\n\n    zoom, setZoom,\n\n    theme, toggleTheme,\n  }} >{ children }</TwofoldContext.Provider>\n}\nTwofoldContextProvider.PropTypes = {\n\n  currentUser: PropTypes.object.isRequired,\n  setCurrentUser: PropTypes.func.isRequired,\n\n  useApi: PropTypes.func.isRequred,\n}\n\n/* U */\nexport { default as useWindowSize } from './useWindowSize'\n\n/* W */\n\n/**\n * Wrapper Bordered. This expects a list? _vp_ 2021-11-02\n * Used in collapsibles and MarkersList\n */\nexport const WBordered = styled.div`\n  border: ${p => p.theme.thinBorder};\n  border-radius: ${p => p.theme.thinBorderRadius};\n  background: ${p => p.theme.colors.cardBackground};\n  padding: .5em;\n\n  margin-bottom: 1em;\n`;\n\n/**\n * Wrapper Bordered Item. Is padded, margined.\n */\nexport const WBorderedItem = styled.div`\n  border: ${p => p.theme.thinBorder};\n  border-radius: ${p => p.theme.thinBorderRadius};\n  background: ${p => p.theme.colors.cardBackground};\n  color: ${p => p.theme.colors.text};\n\n  margin: 0 .5em .5em 0;\n  padding: .5em;\n\n  text-align: center;\n\n  width: 18%;\n  max-width: 140px;\n  min-width: 120px;\n`;\n\n\nexport const WidgetContainer = ({ children, ...props }) => {\n  return <WBordered {...props} >{ children }</WBordered>\n}\n\nexport const Wrapper = styled.div`\n  height: 100vh;\n`;\n\n/* Z */\n\nexport const ZoomContext = React.createContext({})\n\n\n\n","/**\n * ishjs / jwt_manager\n */\n\nimport PropTypes from 'prop-types'\nimport React, { useContext, useEffect, useState } from 'react'\nimport styled from 'styled-components'\n\nimport { Btn, C, logg, request } from \"$shared\" // @TODO: alias $shared\n\n\n\n// @TODO: testdrive this context,\n// @TODO: replace TwofoldContext in guydme with the one from ishjs.\nexport const JwtContext = React.createContext({})\nconst JwtContextProvider = ({ children, ...props }) => {\n  logg(props, 'JwtContextProvider')\n  const {\n    api,\n  } = props\n\n  const maybeUser = JSON.parse(localStorage.getItem(C.current_user)) || C.anonUser\n  const [ currentUser, setCurrentUser ] = useState(maybeUser)\n  const [ loginModalOpen, setLoginModalOpen ] = useState({})\n\n  // call to verify creds\n  useEffect(() => {\n    // request.get(`${config.apiOrigin}${config.routes.myAccountPath}`).then((r) => r.data).then((resp) => {\n    api.getMyAccount().then((resp) => {\n      localStorage.setItem(C.current_user, JSON.stringify(resp))\n      setCurrentUser(resp) // must be done *after* setting C.jwt_token\n    }).catch((e) => {\n      logg(e, 'e322')\n      // toast(\"Login failed\") // @TODO: re-add toast\n      setCurrentUser(C.anonUser)\n      localStorage.removeItem(C.current_user)\n      localStorage.removeItem(C.jwt_token)\n    })\n  }, [])\n\n  return <JwtContext.Provider value={{\n    api,\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n  }} >{ children }</JwtContext.Provider>\n}\nJwtContextProvider.props = {\n  api: PropTypes.object,\n}\nexport { JwtContextProvider }\n\n// @TODO: move to shared?\nconst FlexRow = styled.div`\n  display: flex;\n\n  > * {\n    margin: auto .4em;\n  }\n`;\n\nconst W1 = styled.div`\n  border: 1px solid red;\n`;\n\nconst W2 = styled.div`\n  display: flex;\n`;\n\nexport const SimpleJwtRow = () => {\n  const {\n    api,\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n  } = useContext(JwtContext)\n  logg(useContext(JwtContext), 'SimpleJwtRowUsedJwtContext')\n\n  return <W1>\n    <FlexRow>\n      { /* <FbLogin /> */ }\n      { currentUser.email && <W2>\n        <i>{currentUser.email}</i>\n        <Logout />\n      </W2>}\n      { !currentUser.email && <LoginWithPassword /> }\n    </FlexRow>\n  </W1>\n}\n\n\n\nconst _W = styled.div`\n  display: flex;\n\n  > * {\n    // margin: auto .4em;\n  }\n`;\n\nexport const LoginWithPassword = (props) => {\n  // logg(useContext(JwtContext), 'useContext(JwtContext)')\n  const {\n    api,\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n  } = useContext(JwtContext)\n  const [ email, setEmail ] = useState('')\n  const [ password, setPassword ] = useState('')\n\n  const doPasswordLogin = async (email, password) => {\n    // logg(`${config.apiOrigin}${config.routes.loginWithPasswordPath}`, 'doPasswordLogin')\n    // request.post(`${config.apiOrigin}${config.routes.loginWithPasswordPath}`, { email, password }).then((r) => r.data\n    api.postLoginWithPassword({ email, password }).then((resp) => {\n      logg(resp, 'ze resp')\n\n      localStorage.setItem(C.jwt_token, resp.jwt_token)\n      localStorage.setItem(C.current_user, JSON.stringify(resp))\n      setCurrentUser(resp) // must be done *after* setting C.jwt_token\n      setLoginModalOpen(false)\n    }).catch((e) => {\n      logg(e, 'e322')\n      toast(\"Login failed\")\n      setCurrentUser(C.anonUser)\n    })\n  }\n\n  return <_W>\n    <input type='email' value={email} onChange={(e) => setEmail(e.target.value) } /><br />\n    <input type='password' value={password} onChange={(e) => setPassword(e.target.value) }\n      onKeyDown={(e) => {\n        if (e.key === 'Enter') { doPasswordLogin(email, password) }\n      }}\n    />\n    <Btn onClick={() => doPasswordLogin(email, password)}>Login</Btn>\n  </_W>\n}\n\n\nexport const Logout = () => {\n  const { currentUser, setCurrentUser } = useContext(JwtContext)\n  const doLogout = () => {\n    localStorage.removeItem(C.jwt_token)\n    localStorage.removeItem(C.current_user)\n    setCurrentUser({})\n  }\n  return <Btn onClick={doLogout}>Logout</Btn>\n}\n","/*\n * ishjs / components / users / PasswordLogin\n */\n\nimport PropTypes from 'prop-types'\nimport React, { Fragment as F, useContext, useState, } from 'react'\nimport { ToastContainer, toast } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\nimport styled from 'styled-components'\n\nimport {\n  Btn, C, logg, request,\n} from \"$shared\"\nimport {\n  AuthContext,\n} from './'\n\nconst _W = styled.div`\n  display: flex;\n\n  > * {\n    // margin: auto .4em;\n  }\n`;\n\n/**\n * Exchange your email and password for a jwt token.\n * api.doLogin() must be present.\n * Requires being wrapped in TwofoldContext, which should have:\n * * currentUser, setCurrentUser,\n * * useApi\n *\n * Sets `C.current_user` and `C.jwt_token` in local storage.\n *\n * Allows logout. (@TODO: not implemented)\n */\nconst PasswordLogin = (props) => {\n  // logg(props, 'PasswordLogin')\n\n  const {\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n    useApi,\n  } = useContext(SimpleContext)\n  // logg(useContext(SimpleContext), 'PasswordLoginUsedContext')\n\n  const [ email, setEmail ] = useState('')\n  const [ password, setPassword ] = useState('')\n\n  const api = useApi()\n\n  // api.doLogin = `${config.apiOrigin}${api.loginPath}`\n  const doPasswordLogin = async (email, password) => {\n    api.postLogin({ email, password }).then((resp) => {\n      // localStorage.setItem(C.jwt_token, resp.jwt_token)\n      // localStorage.setItem(C.current_user, JSON.stringify(resp))\n      // setCurrentUser(resp) // must be done *after* setting C.jwt_token\n\n      setLoginModalOpen(false)\n    }).catch((e) => {\n      logg(e, 'e322')\n      toast(\"Login failed\")\n      setCurrentUser(C.anonUser)\n    })\n  }\n\n  return <_W>\n    <input type='email'    value={email}    onChange={(e) => setEmail(e.target.value)    } /><br />\n    <input type='password' value={password} onChange={(e) => setPassword(e.target.value) }\n      onKeyDown={(e) => { if (e.key === 'Enter') { doPasswordLogin(email, password) } }}\n    />\n    <Btn onClick={() => doPasswordLogin(email, password)}>Password Login</Btn>\n  </_W>\n}\nPasswordLogin.propTypes = {\n  // none so far\n}\n\nexport default PasswordLogin\n","\nimport React, { Fragment as F, useContext, useState } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nimport {\n  AuthContext,\n} from '$components/users'\nimport {\n  Btn,\n  C,\n  logg,\n} from '$shared'\n\nconst W0 = styled.div`\n`;\n\nconst Actions = styled.div`\n  display: flex;\n  flex-direction: row-reverse;\n`;\n\n/**\n * A single text area that saves locally and in the cloud.\n */\nconst Scratchpad = (props) => {\n  // logg(props, 'Scratchpad')\n\n  const {\n    useApi,\n  } = useContext(AuthContext)\n\n  const api = useApi()\n\n  const [ txt, setTxt ] = useState(localStorage.getItem(C.names.scratchpad) || '')\n\n  const doSave = () => {\n    localStorage.setItem(C.names.scratchpad, txt)\n    api.postProfile({ scratchpad: txt }).then((data) => {\n      // toast('Updated profile.')\n    }).catch((err) => {\n      logg('Cannot update profile:', err)\n      // toast('e54 - Cannot update profile.')\n    })\n  }\n\n  return <W0>\n    <textarea name='scratchpad' rows='20' cols='40'\n      onChange={(e) => setTxt(e.target.value) }\n      value={txt}\n    / >\n    <Actions>\n      <Btn onClick={doSave}>Save</Btn>\n    </Actions>\n  </W0>\n}\nScratchpad.propTypes = {\n  // none so far\n}\n\nexport default Scratchpad\n"],"names":["C","anonUser","bottomDrawerOpen","collapsible","description","extra1","extra2","extra3","map","markers","collapsibles","current_user","foldedCenter","foldedLeft","foldedRight","horizontal","item_types","gallery","report","video","jwt_token","layout_onecol","layout_mapui","locations","earth","map_panel_types","Equirectangular","MapPanel","MapPanelNoZoom","ThreePanelV1","ThreePanelV4","names","scratchpad","rated","nc17","ratedConfirmation","theme","themes","dark","light","twofoldPercent","variants","bordered","floating","inline","transparent","vertical","RegisterWithEmailBtn","props","React","LoginWithEmailBtn","AuthWidget","logg","useContext","AuthContext","currentUser","setCurrentUser","setLoginModalOpen","setRegisterModalOpen","doLogout","JSON","stringify","email","F","propTypes","LoginModal","loginModalOpen","useApi","useState","setEmail","password","setPassword","api","doPasswordLogin","postLogin","then","r","toast","err","e","target","value","key","RegisterModal","registerModalOpen","password2","setPassword2","doRegister","localStorage","setItem","zIndex","createContext","AuthContextProvider","children","defaultUser","getItem","parse","localCurrentUser","_setCurrentUser","setLocalCurrentUser","user","moreProps","_FacebookLogin","Plugins","FacebookLogin","FACEBOOK_PERMISSIONS","doFbLogin","login","permissions","result","accessToken","request","post","config","apiOrigin","longTermTokenPath","token","resp","data","axios","create","S","borderWidth","bottomDrawerClosedHeight","bottomDrawerOpenHeight","breadcrumbsHeight","thinBorderWidth","thinBorderRadius","lightTheme","thinBorder","colors","text","background","blue","darkGrey","lightGrey","red","border","cardBackground","darkTheme","BackIcon","styled","div","Btn","ChevronLeft","_ChevronLeft","p","ChevronRight","_ChevronRight","Card","_Box","cursor","_FlexCol","FlexCol","FlexRow","_Circle","a","b","c","replace","length","window","console","log","MenuIcon","_MenuIcon","TwofoldContext","WBordered","WBorderedItem","Wrapper","ZoomContext","JwtContext","JwtContextProvider","maybeUser","useEffect","getMyAccount","removeItem","PropTypes","object","W1","W2","SimpleJwtRow","_W","LoginWithPassword","postLoginWithPassword","Logout","PasswordLogin","SimpleContext","W0","Actions","Scratchpad","txt","setTxt","doSave","postProfile"],"mappings":"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"}