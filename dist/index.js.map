{"version":3,"file":"index.js","sources":["../src/shared/C.jsx","../src/shared/request.jsx","../src/shared/S.jsx","../src/shared/ThemeProvider.jsx","../src/shared/index.jsx","../src/components/Metaline/Metaline.jsx","../src/components/galleries/GalleriesShow.jsx","../src/TestApp_Gallery.jsx","../src/components/users/JwtContext.jsx","../src/components/users/LoginModal.jsx","../src/components/users/RegisterModal.jsx","../src/components/users/index.jsx","../src/components/users/Scratchpad.jsx","../src/components/SideMenu/index.jsx","../src/TestApp_Gallery20230112Chitown.jsx","../src/index.jsx"],"sourcesContent":["\n/**\n * Constants\n *\n * @deprecated, I doubt I'll use it here.\n *\n * * C.anonUser\n * * C.current_user\n * * C.jwt_token\n * * C.item_types\n *\n */\nconst C = {\n\n  // A\n  anonUser: {}, // as opposed to null\n\n  // B\n  bottomDrawerOpen: 'bottom-drawer-open', // localStorage\n\n  // C\n  collapsible: {\n    description: \"descr-sec\",\n    extra1: \"extra1-sec\",\n    extra2: \"extra2-sec\",\n    extra3: \"extra3-sec\",\n    map: \"map-sec\",\n    markers: \"markers-sec\",\n  },\n  collapsibles: 'collapsibles', // localStorage\n  current_user: 'current_user',\n\n\n  // H\n  horizontal: 'horizontal',\n\n  // I\n  item_types: {\n    gallery: 'Gallery',\n    report: 'Report',\n    video: 'Video',\n  },\n\n  // J\n  jwt_token: 'jwt_token',\n\n  // L\n  layout_onecol: 'onecol',\n  layout_mapui: 'mapui',\n  locations: {\n    earth: 'earth',\n  },\n\n  // M\n  map_panel_types: {\n    Equirectangular: \"Equirectangular\",\n    MapPanel: \"MapPanel\",\n    MapPanelNoZoom: \"MapPanelNoZoom\",\n    ThreePanelV1: \"ThreePanelV1\",\n    ThreePanelV4: \"ThreePanelV4\",\n  },\n\n  // N\n  names: {\n    scratchpad: 'Scratchpad',\n  },\n\n  // R\n  rated: {\n    nc17: 'nc-17',\n  },\n  ratedConfirmation: 'rated-confirmation', // localStorage\n\n  // T\n  theme: 'theme',\n  themes: {\n    dark: 'dark',\n    light: 'light',\n  },\n  twofoldPercent: 'twofold-percent', // localStorage\n\n  // V\n  variants: {\n    bordered: 'bordered', // for Newsitems\n    floating: 'floating', // for main-menu btn\n    inline: 'inline',     // for main-menu btn\n    transparent: 'transparent', // for markers on Right\n  },\n  vertical: 'vertical',\n}\nexport default C\n","\nimport axios from \"axios\"\n\n/*\nimport config from \"config\"\n\nconst settings = {\n  baseURL: config.apiOrigin\n}\n\nexport default axios.create(settings)\n*/\n\nexport default axios.create({})\n","\n/**\n * Style Constants\n *\n * @TODO: remove this file entirely. _vp_ 2022-09-20\n * @deprecated, use variables.css and css vars\n */\nconst S = {\n  // Twofold layout\n  borderWidth: '10px',\n  bottomDrawerClosedHeight: '24px',\n  bottomDrawerOpenHeight: '124px',\n  breadcrumbsHeight: '30px',\n\n  smallWidth: '10px',\n  mediumWidth: '20px',\n\n  thinBorderWidth: '2px',\n}\n\nconst lightTheme = {\n  ...S,\n  thinBorder: '2px solid black',\n  colors: {\n    text: 'black',\n    background: '#dedede',\n    border: 'black', // removing this...\n    blue: '#6aa3e9',\n    cardBackground: 'white',\n    cyan: \"#49bcc6\",\n    darkGrey: '#605d5d',\n    gold: '#ffe100',\n    lightGrey: '#988b8b',\n    red: 'red',\n  }\n}\n\nconst darkTheme = {\n  ...S,\n  thinBorder: '2px solid white',\n  colors: {\n    text: 'white',\n    background: '#292929',\n    border: 'white', // removing this...\n    blue: '#73b0fa',\n    cardBackground: '#1a1a1a',\n    cyan: \"#49bcc6\",\n    darkGrey: '#b3afaf',\n    gold: '#ffe100',\n    lightGrey: '#4a4343',\n    red: '#eb83a8',\n  }\n}\n\nexport default {\n  lightTheme,\n  darkTheme\n}\n","\nimport React, { useEffect, useState, } from 'react'\nimport { ThemeProvider as _ThemeProvider } from 'styled-components'\n\nimport {\n  C,\n  logg,\n  S,\n} from '$shared'\n\n/**\n * ThemeProvider - this one is my own.\n**/\nexport const ThemeContext = React.createContext({})\nconst ThemeProvider = ({ children, ...props }) => {\n\n  const defaultTheme = 'undefined' === typeof window ? C.themes.light : ( window.localStorage.getItem(C.theme) || C.themes.light )\n  const [theme, setTheme] = useState(defaultTheme)\n\n  // set the body class on page load, client only\n  useEffect(() => {\n    const positive = theme === C.themes.light ? C.themes.light : C.themes.dark\n    const negative = theme === C.themes.light ? C.themes.dark : C.themes.light\n    document.body.classList.remove(negative)\n    document.body.classList.add(positive)\n  }, [])\n\n  // used by DayNightToggle\n  const toggleTheme = (e) => {\n    e.preventDefault()\n    if (theme === C.themes.light) {\n      window.localStorage.setItem(C.theme, C.themes.dark)\n      setTheme(C.themes.dark)\n      document.body.classList.remove(C.themes.light)\n      document.body.classList.add(C.themes.dark)\n    } else {\n      window.localStorage.setItem(C.theme, C.themes.light)\n      setTheme(C.themes.light)\n      document.body.classList.add(C.themes.light)\n      document.body.classList.remove(C.themes.dark)\n    }\n  }\n\n  return <ThemeContext.Provider value={{ theme, setTheme, toggleTheme }} >\n    <_ThemeProvider theme={theme == C.themes.light ? S.lightTheme: S.darkTheme} >\n      { children }\n    </_ThemeProvider>\n  </ThemeContext.Provider>\n}\nexport default ThemeProvider\n\n","/*\n *  $shared / index\n */\nimport { arrowBack, closeOutline, } from 'ionicons/icons'\nimport { CircularProgress as _CircularProgress } from '@material-ui/core'\nimport _Box from '@material-ui/core/Box'\nimport {\n  ChevronLeft as _ChevronLeft,\n  ChevronRight as _ChevronRight,\n  Close as _Close,\n  Menu as _MenuIcon,\n} from '@material-ui/icons'\nimport PropTypes from 'prop-types'\nimport React, { useEffect, useState } from 'react'\nimport {\n  Route as _Route, useHistory,\n} from 'react-router-dom'\nimport styled from 'styled-components'\n\n\n/* A */\n\nconst Actions = styled.div`\n\n  // @TODO: this should use variables, for Modal inner size.\n  // I'd need to do dependency injection of the variable, from infiniteshelterjs into ishlibjs.\n  position: fixed; // for GalleriesShow\n  top: 60px;\n  right: 60px;\n\n  display: flex;\n  flex-direction: row-reverse;\n`;\nexport { Actions }\n\n/* B */\n\n/**\n * Back Button\n */\n// const BackIcon = styled(IonIcon)\n// @TODO: reintroduce IonIcon maybe?\nconst BackIcon = styled.div`\n  margin-right: 5px;\n  cursor: pointer;\n`;\nexport const BackBtn = () => {\n  const history = useHistory()\n  return <BackIcon onClick={history.goBack} icon={arrowBack}></BackIcon>\n}\n\n/**\n * Just your regular shadowed box. Pointer cursor. TDD\n */\nexport const Btn = styled.div`\n  border: 1px solid gray;\n  border-radius: 5px;\n  cursor: pointer;\n  display: inline-block;\n  padding: .3em 1em;\n`;\n\n\n/* C */\nexport { default as C } from './C'\n\nexport const ChevronLeft = styled(_ChevronLeft)`\n  color: ${(p) => p.theme.colors.text}\n`;\nexport const ChevronRight = styled(_ChevronRight)`\n  color: ${(p) => p.theme.colors.text}\n`;\n\n/**\n * Card\n */\nexport const Card = styled(_Box)`\n  margin-bottom: 1em;\n  padding: 1em;\n  background: white;\n  cursor: ${p => p.cursor ? p.cursor : 'auto'};\n\n  display: flex;\n  flex-direction: column;\n`;\n\n/**\n * CloseBtn\n**/\nexport const CloseBtn = ({ children, ...props }) => {\n  return <_Close style={{ cursor: 'pointer', ...props.style }} {...props} />\n};\nCloseBtn.propTypes = {\n  onClick: PropTypes.func.isRequired,\n}\n\n/* D */\n\n/* F */\n\n/**\n * FlexCol\n**/\nconst _FlexCol = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  > * {\n    margin: auto .4em; // @TODO: standardize this size!\n  }\n`;\nexport const FlexCol = ({ children, ...props }) => <_FlexCol className=\"FlexCol\" {...props} >{children}</_FlexCol>\n\n/**\n * FlexRow\n *\n * @TODO: Remove. Where is this used?! This is silly.\n**/\nexport const FlexRow = styled.div`\n  display: flex;\n\n  > * {\n    // margin: auto .4em; // @TODO: why? the LoginModal needs no margins!\n  }\n`;\n\n\n/* I */\n\n/**\n * Like the rails inflector, has methods:\n * tableize()\n */\nexport const inflector = {\n  tableize: (m) => {\n    switch(m) {\n      case 'Gallery':\n        return 'galleries'\n      default:\n      return `${m.toLowerCase()}s`\n    }\n  },\n}\n\n/* L */\n\n\n// From: https://codepen.io/charlyarg/pen/GByKja\nconst _Circle = styled.div`\n  position: fixed;\n  z-index: 999;\n  overflow: show;\n  margin: auto;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  width: 50px;\n  height: 50px;\n`;\nexport const Loading = (p) => <_Circle><_CircularProgress /></_Circle>\n\n/**\n * Usage: logg(someObject, 'label')\n *\n * This development-grade logger can be used instead of console.log() with some advantages:\n * * It encourages consistent labeling of logs. By labeling each log line, you can have dozens of log lines\n * written per action, and still know which log line comes from where.\n * The recommended label is the component name, or function name.\n * * If the label is present, the logged object is placed in the window, allowing you to inspect it in the console. The\n * label becomes the name of the object (stripped to [0-9a-zA-Z\\-_] chars). If you're logging a function, you can execute it.\n * If you log more than one thing, they can interact, allowing you to validate control flow.\n * * the logger can be turned off by making this function simply return.\n */\nconst logg = (a, b=\"\", c=null) => {\n  c = \"string\" === typeof c ? c : b.replace(/\\W/g, \"\");\n  if (c.length > 0 && typeof window !== \"undefined\") {\n    window[c] = a;\n  }\n\n  console.log(`+++ ${b}:`, a); // eslint-disable-line no-console\n};\n// optimized for Android (e.g. it inspects and doesn't use window)\nconst logg2 = (a, b=\"\", c=null) => {\n  console.log(`+++ ${b}:`, a.inspect); // eslint-disable-line no-console\n};\nexport { logg, logg2 };\n\n/* M */\nexport const MenuIcon = styled(_MenuIcon)`\n  color: ${(p) => p.theme.colors.text}\n`;\n\n\nconst _Header = styled.div`\n  flex-grow: 1;\n  text-align: center;\n  font-size: 1.2rem;\n`;\nexport const ModalHeader = ({ children, onClose, ...props }) => {\n  return <FlexRow >\n    <_Header>{children}</_Header>\n    <CloseBtn onClick={onClose} />\n  </FlexRow>\n}\nModalHeader.propTypes = {\n  onClose: PropTypes.func.isRequired,\n}\n\n/* P */\n\n/**\n * pretty print date\n */\nexport const pp_date = (d) => (d || \"\" ).substring(0, 10)\n\n/* R */\n\nexport { default as request } from \"./request\"\n\n/* S */\nexport { default as S } from \"./S\"\n\n/* T */\nexport { default as ThemeProvider, ThemeContext } from './ThemeProvider'\n\n/* U */\nexport { default as useWindowSize } from './useWindowSize'\n\n/* W */\n\n/**\n * Wrapper Bordered. This expects a list? _vp_ 2021-11-02\n * Used in collapsibles and MarkersList\n */\nexport const WBordered = styled.div`\n  border: ${p => p.theme.thinBorder};\n  border-radius: ${p => p.theme.thinBorderRadius};\n  background: ${p => p.theme.colors.cardBackground};\n  padding: .5em;\n\n  margin-bottom: 1em;\n`;\n\n/**\n * Wrapper Bordered Item. Is padded, margined.\n */\nexport const WBorderedItem = styled.div`\n  border: ${p => p.theme.thinBorder};\n  border-radius: ${p => p.theme.thinBorderRadius};\n  background: ${p => p.theme.colors.cardBackground};\n  color: ${p => p.theme.colors.text};\n\n  margin: 0 .5em .5em 0;\n  padding: .5em;\n\n  text-align: center;\n\n  width: 18%;\n  max-width: 140px;\n  min-width: 120px;\n`;\n\n\nexport const WidgetContainer = ({ children, ...props }) => {\n  return <WBordered {...props} >{ children }</WBordered>\n}\n\nexport const Wrapper = styled.div`\n  height: 100vh;\n`;\n\n/* Z */\n\nexport const ZoomContext = React.createContext({})\n\n\n\n","\nimport React from \"react\"\nimport styled from 'styled-components'\n\nimport styles from \"./Metaline.module.scss\"\n\nimport {\n  logg,\n  pp_date,\n} from \"$shared\"\n\nconst W0 = styled.div`\n  margin: .5em 0;\n  color: ${p=>p.theme.colors.text};\n`\n\n/**\n * Metaline\n**/\nconst Metaline = (props) => {\n  // logg(props, 'Metaline')\n  const {\n    created_at, city,\n    tags = [],\n    username,\n  } = props\n\n  return (\n    <W0 className={styles.Metaline} >\n      { created_at && <span className=\"date\">On {pp_date(created_at)}&nbsp;</span>}\n      { username && <>by <span className=\"user\" style={{ textDecoration: 'underline' }} >{username}</span>&nbsp;</> }\n      {/* { city     && <>in <span className=\"city\" onClick={navigateToCity}> {city.name} </span>&nbsp;</> } */}\n      {/* { tags     && tags.map((tag, i) => <span key={i} className=\"tags\">{tag.name}</span>) } */}\n    </W0>\n  );\n\n}\n\nexport default Metaline\n\n","\nimport { IonPage, IonContent, IonButton, IonImg, IonLoading } from \"@ionic/react\"\nimport PropTypes from 'prop-types'\nimport React, { Fragment as F, useContext, useEffect, useRef, useState } from \"react\"\nimport { Route, useLocation, useHistory, Switch } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport { Metaline } from \"$components/Metaline\"\nimport {\n  logg,\n} from \"$shared\"\n\nimport styles from \"./Galleries.module.scss\"\n\nconst W0 = styled.div`\n  // border: 1px solid blue;\n  height: auto;\n`;\n\n/**\n * GalleriesShow\n * version: 0.0.0\n * _vp_ 2023-01-12\n *\n * Excludes itemToUnlock - this version is public-only\n *\n * @TODO: inject useApi EITHER thru props OR thru ApiProvider _vp_ 2023-01-12\n * @TODO: there is no back button, either! maybe re-add it\n *\n**/\nconst GalleriesShow = (props) => {\n  logg(props, 'GalleriesShow')\n  const {\n    match,\n    useApi,\n  } = props\n\n  const [gallery, setGallery] = useState({})\n\n  const mountedRef = useRef('init')\n\n  const api = useApi() // @TODO: make injectable\n  logg(api, 'api')\n\n  useEffect(() => {\n    api.getGallery(match.params.slug).then(_gallery => {\n      if (!mountedRef.current) { return }\n      setGallery(_gallery)\n    })\n    return () => {\n      mountedRef.current = null\n    }\n  }, [gallery.id] )\n\n  return <W0 className={styles.GalleriesShow} >\n\n    <div className={styles.narrow} >\n      <h1 className={styles.heading} >\n        <span className={styles.title} >{gallery.name}</span>\n      </h1>\n      <Metaline {...gallery} />\n\n      <div className={styles.thumbs} >\n        { gallery.photos && gallery.photos.map((ph, i) =>\n          <div className={styles.card} key={i}>\n            <div>\n              <IonImg src={ph.thumb_url}></IonImg>\n            </div>\n          </div>\n        ) }\n      </div>\n\n      <div dangerouslySetInnerHTML={{ __html: gallery.description }}></div>\n\n    </div>\n    <div className={styles.full_img_section} >\n\n      { gallery.photos && gallery.photos.map((ph, i) =>\n        <div className={styles.item} key={i}>\n          <img src={ph.large_url} />\n        </div>\n      ) }\n\n    </div>\n\n    <hr />\n    <footer>\n      <div className='maxWidth'>\n        ishlibjs v0.6.0 :: GalleriesShow v0.0.0\n      </div>\n    </footer>\n  </W0>\n}\nGalleriesShow.propsTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      slug: PropTypes.string,\n    }),\n  }),\n  useApi: PropTypes.function,\n}\n\nexport default GalleriesShow\n","\nimport React, { useState, } from 'react'\n\n// import 'react-toastify/dist/ReactToastify.css' // @TODO: re-add somehow nicer.\n\nimport {\n  logg,\n  request,\n  ThemeProvider,\n} from \"$shared\"\nimport {\n  GalleriesShow,\n } from './components/galleries'\n\nconst config = {\n  apiOrigin: 'http://localhost:3001',\n}\n\n/**\n * _vp_ 2023-01-12\n *\n * @TODO: apiRequest should be separate from apiRouter\n**/\nconst TestGallery = () => {\n\n  const api = {\n    getGallery: (slug) => {\n      return request.get(`${config.apiOrigin}/api/galleries/view/${slug}`\n      ).then((r) => r.data.gallery)\n    },\n  }\n\n  return <>\n    <ThemeProvider >\n      <GalleriesShow match={{ params: { slug: 'chicago-scenery-i' } }} useApi={() => api} />\n    </ThemeProvider>\n  </>\n}\nexport default TestGallery\n","\nimport PropTypes from 'prop-types'\nimport React, { useContext, useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport { toast } from 'react-toastify'\n\nimport {\n  Btn,\n  logg,\n} from \"$shared\"\n\nexport const JwtContext = React.createContext({})\n\nconst LoginWithPassword = () => {};\n\n/**\n * JwtContextProvider\n**/\nconst JwtContextProvider = ({ children, ...props }) => {\n  logg(props, 'JwtContextProvider 222')\n  const {\n    api,\n  } = props\n\n  const [ currentUser, setCurrentUser ] = useState({})\n  const [ loginModalOpen, setLoginModalOpen ] = useState({})\n\n  // call to verify creds\n  useEffect(() => {\n    logg('setting currentUser...')\n\n    // request.get(`${config.apiOrigin}${config.routes.myAccountPath}`).then((r) => r.data).then((resp) => {\n    api.getMyAccount().then((resp) => {\n      logg(resp, 'got this resp')\n\n      setCurrentUser(resp) // must be done *after* setting localStorage.jwt_token\n    }).catch((e) => {\n      logg(e, 'e322')\n      toast(`Login failed: ${e}`)\n      setCurrentUser({})\n    })\n  }, [])\n\n  return <JwtContext.Provider value={{\n    api,\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n  }} >{ children }</JwtContext.Provider>\n}\nJwtContextProvider.props = {\n  api: PropTypes.object,\n}\nexport { JwtContextProvider }\n\n// @TODO: move to shared?\nconst FlexRow = styled.div`\n  display: flex;\n\n  > * {\n    margin: auto .4em;\n  }\n`;\n\nconst W1 = styled.div`\n  border: 1px solid red;\n`;\n\nconst W2 = styled.div`\n  display: flex;\n`;\n\nexport const SimpleJwtRow = () => {\n  const {\n    api,\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n  } = useContext(JwtContext)\n  // logg(useContext(JwtContext), 'SimpleJwtRowUsedJwtContext')\n\n  return <W1>\n    <FlexRow>\n      { /* <FbLogin /> */ }\n      { currentUser.email && <W2>\n        <i>{currentUser.email}</i>\n        <Logout />\n      </W2>}\n      { !currentUser.email && <LoginWithPassword /> }\n    </FlexRow>\n  </W1>\n}\n\n\n\nconst _W = styled.div`\n  display: flex;\n\n  > * {\n    // margin: auto .4em;\n  }\n`;\n\n\nexport const Logout = () => {\n  const { currentUser, setCurrentUser } = useContext(JwtContext)\n  const doLogout = () => {\n    localStorage.removeItem('jwt_token') // this is not constantized b/c I removed $shared.C from this repo.\n    setCurrentUser({})\n  }\n  return <Btn onClick={doLogout}>Logout</Btn>\n}\n","\nimport PropTypes from 'prop-types'\nimport React, { Fragment as F, useContext, useState, } from 'react'\nimport Modal from \"react-modal\"\nimport styled from 'styled-components'\n\nimport {\n  Btn,\n  FlexCol, FlexRow,\n  logg,\n  ModalHeader,\n} from \"$shared\"\nimport {\n  AuthContext,\n} from './'\n\nimport styles from './LoginModal.module.scss'\n\n/**\n * LoginModal\n**/\nconst LoginModal = (props) => {\n  // logg(props, 'LoginModal, ishlibjs')\n  const {\n    onError, onSuccess,\n  } = props\n\n  const {\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n    registerModalOpen, setRegisterModalOpen,\n    useApi,\n  } = useContext(AuthContext)\n  // logg(useContext(AuthContext), 'LoginModalUsedAuthContext')\n\n  const [ email, setEmail ] = useState('')\n  const [ password, setPassword ] = useState('')\n  const api = useApi()\n\n  const doPasswordLogin = async (email, password) => {\n    api.postLogin({ email, password }).then((r) => {\n      setLoginModalOpen(false)\n      onSuccess(r)\n    }).catch((err) => {\n      onError(err)\n    })\n  }\n\n  Modal.setAppElement('body')\n\n  return <Modal\n    className={`LoginModal ${styles.LoginModal}`}\n    isOpen={!!loginModalOpen}\n    overlayClassName={styles.LoginModalOverlay}\n    portalClassName={styles.LoginModalPortal}\n  >\n    <ModalHeader onClose={() => setLoginModalOpen(false)} >Login</ModalHeader>\n    { 'string' === typeof loginModalOpen && <FlexRow>\n      <div className={styles.Notice} >{ loginModalOpen }</div>\n    </FlexRow> }\n    <FlexCol>\n      <label htmlFor='email'>Email</label>\n      <input name='email' type='email' value={email} onChange={(e) => setEmail(e.target.value)    } />\n\n      <label htmlFor='password'>Password</label>\n      <input name='password' type='password' value={password} onChange={(e) => setPassword(e.target.value) }\n        onKeyDown={(e) => { if (e.key === 'Enter') { doPasswordLogin(email, password) } }}\n      />\n      <FlexRow style={{\n        flexDirection: 'row-reverse',\n        justifyContent: 'space-between',\n        marginTop: '0.4em',\n      }} >\n        <Btn onClick={() => doPasswordLogin(email, password)}>Login</Btn>\n      </FlexRow>\n    </FlexCol>\n    <hr style={{ margin: '2rem 0', borderWidth: '1px' }} />\n    <FlexRow style={{ justifyContent: 'center' }} >\n      <a onClick={() => { setLoginModalOpen(false) ; setRegisterModalOpen(true) }}>Register Instead</a>\n    </FlexRow>\n  </Modal>\n}\nLoginModal.propTypes = {\n  onError: PropTypes.func,\n  onSuccess: PropTypes.func,\n}\nexport default LoginModal\n","\nimport React, { useContext, useState, } from 'react'\nimport Modal from \"react-modal\"\nimport { toast } from 'react-toastify'\nimport PropTypes from 'prop-types'\n\nimport {\n  Btn,\n  C, CloseBtn,\n  FlexCol, FlexRow,\n  ModalHeader,\n  logg,\n} from '$shared'\nimport {\n  AuthContext,\n} from '$components/users'\n\nimport styles from './LoginModal.module.scss'\n\n\n/**\n * RegisterModal\n *\n * Uses LoginModal styling\n**/\nconst RegisterModal = (props) => {\n  // logg(props, 'RegisterModal')\n\n  const {\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n    registerModalOpen, setRegisterModalOpen,\n    useApi,\n  } = useContext(AuthContext)\n  // logg(useContext(AuthContext), 'registerModalUsedContext')\n\n  const api = useApi()\n\n  const [ email, setEmail ] = useState('')\n  const [ password, setPassword ] = useState('')\n  const [ password2, setPassword2 ] = useState('')\n\n  const doRegister = async (email, password, password2) => {\n    if (password !== password2) {\n      toast('Passwords do not match')\n      return\n    }\n    const out = api.doRegister({ email, password })\n\n    out.then((r) => {\n      setRegisterModalOpen(false)\n      setLoginModalOpen(r.message)\n    }).catch((e) => {\n      toast(\"Registration failed\")\n    })\n  }\n\n  return <Modal\n    className={`LoginModal ${styles.LoginModal}`}\n    isOpen={registerModalOpen}\n    overlayClassName={styles.LoginModalOverlay}\n    portalClassName={styles.LoginModalPortal}\n  >\n    <ModalHeader onClose={() => setRegisterModalOpen(false)} >Register</ModalHeader>\n    <FlexCol>\n      <label htmlFor='email'>Email</label>\n      <input type='email'    name='email'     value={email}    onChange={(e) => setEmail(e.target.value)    } />\n\n      <label htmlFor='password'>Password</label>\n      <input type='password' name='password'  value={password} onChange={(e) => setPassword(e.target.value) } />\n\n      <label htmlFor='password2'>Confirm Password</label>\n      <input type='password' name='password2' value={password2} onChange={(e) => setPassword2(e.target.value) } />\n\n      <FlexRow style={{\n        flexDirection: 'row-reverse',\n        justifyContent: 'space-between',\n        marginTop: '0.4em',\n      }} >\n        <Btn className=\"Submit\" onClick={() => doRegister(email, password, password2) }>Register</Btn>\n      </FlexRow>\n      <hr style={{ margin: '2rem 0', borderWidth: '1px' }} />\n      <FlexRow style={{ justifyContent: 'center' }} >\n        <a onClick={() => setLoginModalOpen(true) || setRegisterModalOpen(false) }>Login Instead</a>\n      </FlexRow>\n    </FlexCol>\n  </Modal>\n}\nRegisterModal.propTypes = {} // None so far\n\nexport default RegisterModal\n","\nimport { Plugins } from '@capacitor/core'\nimport React, { createContext, useContext, useState } from 'react'\nimport PropTypes from 'prop-types'\n\nimport {\n  Btn,\n  C,\n  logg,\n} from '$shared'\n\n/* A */\nconst AuthContext = createContext({})\nconst AuthContextProvider = ({children, ...props }) => {\n  // logg(props, 'AuthContextProvider')\n  let {\n    currentUser: _currentUser = C.anonUser, setCurrentUser: _setCurrentUser,\n    loginModalOpen: _loginModalOpen = false, setLoginModalOpen: _setLoginModalOpen,\n    registerModalOpen: _registerModalOpen = false, setRegisterModalOpen: _setRegisterModalOpen,\n  } = props\n\n  let [ currentUser, setCurrentUser ] = useState(_currentUser)\n  if (_setCurrentUser) {\n    currentUser = _currentUser\n    setCurrentUser = _setCurrentUser\n  }\n\n  let [ loginModalOpen, setLoginModalOpen ] = useState(_loginModalOpen)\n  if (_setLoginModalOpen) {\n    loginModalOpen = _loginModalOpen\n    setLoginModalOpen = _setLoginModalOpen\n  }\n\n  let [ registerModalOpen, setRegisterModalOpen ] = useState(_registerModalOpen)\n  if (_setRegisterModalOpen) {\n    registerModalOpen = _registerModalOpen\n    setRegisterModalOpen = _setRegisterModalOpen\n  }\n\n  const moreProps = {\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n    registerModalOpen, setRegisterModalOpen,\n  }\n\n  //\n  // props.useApi isRequired\n  //\n  return <AuthContext.Provider value={{ ...props, ...moreProps }} >\n    { children }\n  </AuthContext.Provider>\n}\nAuthContextProvider.propTypes = {\n  useApi: PropTypes.func.isRequired,\n}\n\nexport {\n  AuthContext, AuthContextProvider,\n}\n\n/* F */\nconst { FacebookLogin: _FacebookLogin } = Plugins\n\nconst FACEBOOK_PERMISSIONS = ['email']\n\n/* J */\n\n\n\n/* L */\nexport { default as LoginModal } from \"./LoginModal\"\n\n/* R */\nexport { default as RegisterModal } from \"./RegisterModal\"\n\n\n","\nimport React, { Fragment as F, useContext, useState } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nimport {\n  AuthContext,\n} from '$components/users'\nimport {\n  Actions,\n  Btn,\n  C,\n  logg,\n} from '$shared'\n\nconst W0 = styled.div`\n`;\n\n\n/**\n * A single text area that saves locally and in the cloud.\n */\nconst Scratchpad = (props) => {\n  // logg(props, 'Scratchpad')\n\n  const {\n    useApi,\n  } = useContext(AuthContext)\n\n  const api = useApi()\n\n  const [ txt, setTxt ] = useState(localStorage.getItem(C.names.scratchpad) || '')\n\n  const doSave = () => {\n    localStorage.setItem(C.names.scratchpad, txt)\n    api.postProfile({ scratchpad: txt }).then((data) => {\n      // toast('Updated profile.')\n    }).catch((err) => {\n      logg('Cannot update profile:', err)\n      // toast('e54 - Cannot update profile.')\n    })\n  }\n\n  return <W0>\n    <textarea name='scratchpad' rows='20' cols='40'\n      onChange={(e) => setTxt(e.target.value) }\n      value={txt}\n    / >\n    <Actions>\n      <Btn onClick={doSave}>Save</Btn>\n    </Actions>\n  </W0>\n}\nScratchpad.propTypes = {\n  // none so far\n}\n\nexport default Scratchpad\n","import { IonApp, IonButtons, IonMenuButton } from '@ionic/react'\nimport Drawer from '@material-ui/core/Drawer'\nimport Fab from '@material-ui/core/Fab'\nimport IconButton from '@material-ui/core/IconButton'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport PropTypes from 'prop-types'\nimport React, { Fragment as F, useContext, useEffect, useState } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport {\n  C,\n  logg,\n  MenuIcon,\n} from \"$shared\"\n\nconst W0 = styled.div`\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-content: space-between;\n`;\n\n\nconst SideMenu = ({ children, ...props }) => {\n  const { listItems } = props\n  // logg(props, 'SideMenu')\n\n  const [ drawerOpen, setDrawerOpen ] = React.useState(false)\n  const [ loading, setLoading ] = useState(false)\n  const history = useHistory()\n\n  return <F>\n\n    { /* @TODO: probably remove from here, too many variations of the button, it gotta be separate */ }\n    { props.variant === C.variants.floating ?\n      <Fab onClick={() => setDrawerOpen(true)} style={{ position: 'absolute', top: 0, left: 0, margin: '.5em', zIndex: 1 }} aria-label='main menu'><MenuIcon /></Fab>\n      : <MenuIcon onClick={() => setDrawerOpen(true)} /> }\n\n    <Drawer anchor={\"left\"} open={drawerOpen} onClose={() => setDrawerOpen(false)} >\n      <W0>\n        <List>\n\n          { listItems.map( ({ label, key, path }) => <ListItem button key={key}\n            onClick={() => {\n              setDrawerOpen(false)\n              history.push(path())\n            } } >{ label }\n          </ListItem> )}\n\n        </List>\n\n        { children }\n      </W0>\n    </Drawer>\n\n  </F>\n}\n\nSideMenu.propTypes = {\n  listItems: PropTypes.array.isRequired, // @TODO: specify: key, label, path\n  variant: PropTypes.string,\n}\nexport default SideMenu\n","\nimport React, { useState, } from 'react'\n\n// import 'react-toastify/dist/ReactToastify.css' // @TODO: re-add somehow nicer.\n\nimport {\n  logg,\n  request,\n  ThemeProvider,\n} from \"$shared\"\nimport {\n  GalleriesShow,\n } from './components/galleries'\n\nconst config = {\n  apiOrigin: 'http://localhost:3001',\n}\n\n/**\n * _vp_ 2023-01-12\n *\n * @TODO: apiRequest should be separate from apiRouter\n**/\nconst Gallery20230112Chitown = () => {\n\n  const api = {\n    getGallery: (slug) => {\n      return request.get(`${config.apiOrigin}/api/galleries/view/${slug}`\n      ).then((r) => r.data.gallery)\n    },\n  }\n\n  return <>\n    <ThemeProvider >\n      <GalleriesShow match={{ params: { slug: 'chicago-scenery-i' } }} useApi={() => api} />\n    </ThemeProvider>\n  </>\n}\nexport default Gallery20230112Chitown\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport {\n  logg,\n} from \"./shared\"\nimport TestApp from './TestApp'\n\n// @TODO: rename\nimport * as jwtManager from './components/users/JwtContext' // this syntax is correct\n\n/* A */\nexport { Actions, } from './shared'\nexport { AuthContext, AuthContextProvider, } from './components/users'\n\n/* C */\nexport { CloseBtn } from './shared'\n\n/* F */\nexport { FlexCol, FlexRow } from \"./shared\"\n\n/* J */\nexport { jwtManager }\n\n/* L */\nexport { logg }\nexport { LoginModal } from './components/users'\n\n/* M */\nexport { ModalHeader } from './shared'\n\n/* P */\n\n/* R */\nexport { RegisterModal } from './components/users'\n\n/* S */\nexport { default as Scratchpad } from \"./components/users/Scratchpad\"\nexport { default as SideMenu } from './components/SideMenu'\n\n/* T */\nexport { default as TestApp_Gallery20230112Chitown } from './TestApp_Gallery20230112Chitown'\n\n\n\n/**\n * main - run\n *\n**/\nif (process.env.REACT_APP_SERVE) {\n  ReactDOM.render(<TestApp />, document.getElementById('root'))\n}\n"],"names":["C","anonUser","bottomDrawerOpen","collapsible","description","extra1","extra2","extra3","map","markers","collapsibles","current_user","horizontal","item_types","gallery","report","video","jwt_token","layout_onecol","layout_mapui","locations","earth","map_panel_types","Equirectangular","MapPanel","MapPanelNoZoom","ThreePanelV1","ThreePanelV4","names","scratchpad","rated","nc17","ratedConfirmation","theme","themes","dark","light","twofoldPercent","variants","bordered","floating","inline","transparent","vertical","axios","create","S","borderWidth","bottomDrawerClosedHeight","bottomDrawerOpenHeight","breadcrumbsHeight","smallWidth","mediumWidth","thinBorderWidth","lightTheme","thinBorder","colors","text","background","border","blue","cardBackground","cyan","darkGrey","gold","lightGrey","red","darkTheme","ThemeContext","React","createContext","ThemeProvider","children","props","defaultTheme","window","localStorage","getItem","useState","setTheme","useEffect","positive","negative","document","body","classList","remove","add","toggleTheme","e","preventDefault","setItem","_ThemeProvider","Actions","styled","div","BackIcon","Btn","ChevronLeft","_ChevronLeft","p","ChevronRight","_ChevronRight","Card","_Box","cursor","CloseBtn","_Close","style","propTypes","onClick","PropTypes","func","isRequired","_FlexCol","FlexCol","FlexRow","_Circle","logg","a","b","c","replace","length","console","log","MenuIcon","_MenuIcon","_Header","ModalHeader","onClose","pp_date","d","substring","WBordered","thinBorderRadius","WBorderedItem","Wrapper","ZoomContext","W0","Metaline","created_at","city","tags","username","styles","textDecoration","GalleriesShow","match","useApi","setGallery","mountedRef","useRef","api","getGallery","params","slug","then","_gallery","current","id","narrow","heading","title","name","thumbs","photos","ph","i","card","IonImg","thumb_url","__html","full_img_section","item","large_url","propsTypes","shape","string","function","config","apiOrigin","TestGallery","request","get","r","data","JwtContext","LoginWithPassword","JwtContextProvider","currentUser","setCurrentUser","loginModalOpen","setLoginModalOpen","getMyAccount","resp","catch","toast","object","W1","W2","SimpleJwtRow","useContext","email","_W","Logout","doLogout","removeItem","LoginModal","onError","onSuccess","AuthContext","registerModalOpen","setRegisterModalOpen","setEmail","password","setPassword","doPasswordLogin","postLogin","err","Modal","setAppElement","LoginModalOverlay","LoginModalPortal","Notice","target","value","key","flexDirection","justifyContent","marginTop","margin","RegisterModal","password2","setPassword2","doRegister","out","message","AuthContextProvider","_currentUser","_setCurrentUser","_loginModalOpen","_setLoginModalOpen","_registerModalOpen","_setRegisterModalOpen","moreProps","Scratchpad","txt","setTxt","doSave","postProfile","SideMenu","listItems","drawerOpen","setDrawerOpen","history","useHistory","F","variant","position","top","left","zIndex","label","path","push","array","Gallery20230112Chitown","process","env","REACT_APP_SERVE","ReactDOM","render","TestApp","getElementById"],"mappings":"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"}