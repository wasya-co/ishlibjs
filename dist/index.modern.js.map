{"version":3,"file":"index.modern.js","sources":["../src/shared/request.jsx","../src/shared/S.jsx","../src/shared/index.jsx","../src/jwt_manager/index.jsx"],"sourcesContent":["\nimport axios from \"axios\"\n\n/*\nimport config from \"config\"\n\nconst settings = {\n  baseURL: config.apiOrigin\n}\n\nexport default axios.create(settings)\n*/\n\nexport default axios.create({})\n","\n/**\n * Style Constants\n */\nconst S = {\n  // Twofold layout\n  borderWidth: '10px',\n  bottomDrawerClosedHeight: '20px',\n  bottomDrawerOpenHeight: '115px',\n  breadcrumbsHeight: '30px',\n\n  thinBorderWidth: '2px',\n  thinBorderRadius: '5px',\n}\n\nconst lightTheme = {\n  ...S,\n  thinBorder: '2px solid black',\n  colors: {\n    text: 'black',\n    background: '#dedede',\n    blue: '#6aa3e9',\n    darkGrey: '#605d5d',\n    lightGrey: '#988b8b',\n    red: 'red',\n    border: 'black',\n    cardBackground: 'white'\n  }\n}\n\nconst darkTheme = {\n  ...S,\n  thinBorder: '2px solid white',\n  colors: {\n    text: 'white',\n    background: '#292929',\n    blue: '#73b0fa',\n    darkGrey: '#b3afaf',\n    lightGrey: '#4a4343',\n    red: '#eb83a8',\n    border: 'white',\n    cardBackground: '#1a1a1a'\n  }\n}\n\nexport default {\n  lightTheme,\n  darkTheme\n}","/*\n *  $shared / index\n */\n// alphabetized\nimport { arrowBack } from 'ionicons/icons'\nimport { IonIcon } from '@ionic/react'\nimport { CircularProgress as _CircularProgress } from '@material-ui/core'\nimport _Box from '@material-ui/core/Box'\nimport { ChevronLeft as _ChevronLeft, ChevronRight as _ChevronRight, Menu as _MenuIcon, } from '@material-ui/icons'\nimport React, { useState } from 'react'\nimport {\n  Link, Switch, BrowserRouter as Router, Redirect, Route as _Route, useHistory, withRouter\n} from 'react-router-dom'\nimport styled from 'styled-components'\n\n/* A */\n// export { default as useApi } from \"./Api\"\n// export { default as AppMock } from \"./AppMock\"\n// export { default as AppRouter } from \"./AppRouter\"\n\n/* B */\n\n/**\n * Back Button\n */\nconst BackIcon = styled(IonIcon)`\n  margin-right: 5px;\n  cursor: pointer;\n`;\nexport const BackBtn = () => {\n  const history = useHistory()\n  return <BackIcon onClick={history.goBack} icon={arrowBack}></BackIcon>\n}\n\n/**\n * Just your regular shadowed box. Pointer cursor. TDD\n */\nexport const Btn = styled.div`\n  border: 1px solid gray;\n  border-radius: 5px;\n\n  padding: .3em 1em;\n  cursor: pointer;\n`;\n\n\n/* C */\n\nexport const ChevronLeft = styled(_ChevronLeft)`\n  color: ${(p) => p.theme.colors.text}\n`;\nexport const ChevronRight = styled(_ChevronRight)`\n  color: ${(p) => p.theme.colors.text}\n`;\n\n/**\n * A Card\n */\nexport const Card = styled(_Box)`\n  margin-bottom: 1em;\n  padding: 1em;\n  background: white;\n  cursor: ${p => p.cursor ? p.cursor : 'auto'};\n\n  display: flex;\n  flex-direction: column;\n`;\n\n\n/* D */\n/* I */\n\n/**\n * Like the rails inflector, has methods:\n * tableize()\n */\nexport const inflector = {\n  tableize: (m) => {\n    switch(m) {\n      case 'Gallery':\n        return 'galleries'\n      default:\n      return `${m.toLowerCase()}s`\n    }\n  },\n}\n\n/* L */\n\n\n// From: https://codepen.io/charlyarg/pen/GByKja\nconst _Circle = styled.div`\n  position: fixed;\n  z-index: 999;\n  overflow: show;\n  margin: auto;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  width: 50px;\n  height: 50px;\n`;\nexport const Loading = (p) => <_Circle><_CircularProgress /></_Circle>\n\n/**\n * Usage: logg(someObject, 'label')\n *\n * This development-grade logger can be used instead of console.log() with some advantages:\n * * It encourages consistent labeling of logs. By labeling each log line, you can have dozens of log lines\n * written per action, and still know which log line comes from where.\n * The recommended label is the component name, or function name.\n * * If the label is present, the logged object is placed in the window, allowing you to inspect it in the console. The\n * label becomes the name of the object (stripped to [0-9a-zA-Z\\-_] chars). If you're logging a function, you can execute it.\n * If you log more than one thing, they can interact, allowing you to validate control flow.\n * * the logger can be turned off by making this function simply return.\n */\nconst logg = (a, b=\"\", c=null) => {\n  c = \"string\" === typeof c ? c : b.replace(/\\W/g, \"\");\n  if (c.length > 0) {\n    window[c] = a;\n  }\n\n  console.log(`+++ ${b}:`, a); // eslint-disable-line no-console\n};\n// optimized for Android (e.g. it inspects and doesn't use window)\nconst logg2 = (a, b=\"\", c=null) => {\n  console.log(`+++ ${b}:`, a.inspect); // eslint-disable-line no-console\n};\nexport { logg, logg2 };\n\n/* M */\nexport const MenuIcon = styled(_MenuIcon)`\n  color: ${(p) => p.theme.colors.text}\n`;\n\n/* P */\n\n/**\n * pretty print date\n */\nexport const pp_date = (d) => (d || \"\" ).substring(0, 10)\n\n/* R */\n\nexport { default as request } from \"./request\"\n\n/* S */\nexport { default as S } from \"./S\"\n\n/* T */\n\n/* U */\nexport { default as useWindowSize } from './useWindowSize'\n\n/* W */\n\n/**\n * Wrapper Bordered. This expects a list? _vp_ 2021-11-02\n * Used in collapsibles and MarkersList\n */\nexport const WBordered = styled.div`\n  border: ${p => p.theme.thinBorder};\n  border-radius: ${p => p.theme.thinBorderRadius};\n  background: ${p => p.theme.colors.cardBackground};\n  padding: .5em;\n\n  margin-bottom: 1em;\n`;\n\n/**\n * Wrapper Bordered Item. Is padded, margined.\n */\nexport const WBorderedItem = styled.div`\n  border: ${p => p.theme.thinBorder};\n  border-radius: ${p => p.theme.thinBorderRadius};\n  background: ${p => p.theme.colors.cardBackground};\n  color: ${p => p.theme.colors.text};\n\n  margin: 0 .5em .5em 0;\n  padding: .5em;\n\n  text-align: center;\n\n  width: 18%;\n  max-width: 140px;\n  min-width: 120px;\n`;\n\n\nexport const WidgetContainer = ({ children, ...props }) => {\n  return <WBordered {...props} >{ children }</WBordered>\n}\n\nexport const Wrapper = styled.div`\n  height: 100vh;\n`;\n\n/* Z */\n\nexport const ZoomContext = React.createContext({})\n\n\n\n","/**\n * ishjs / jwt_manager\n */\n\nimport PropTypes from 'prop-types'\nimport React from 'react'\nimport styled from 'styled-components'\n\nimport { Btn, logg, request } from \"../shared\" // @TODO: alias $shared\n\n\n\n// @TODO: testdrive this context,\n// @TODO: replace TwofoldContext in guydme with the one from ishjs.\nexport const JwtContext = React.createContext({})\nconst JwtContextProvider = ({ children, ...props }) => {\n  // logg(props, 'JwtContextProvider')\n  const {\n    config,\n  } = props\n\n  const [ currentUser, setCurrentUser ] = useState({})\n  const [ loginModalOpen, setLoginModalOpen ] = useState({})\n\n  return <JwtContext.Provider value={{\n    config,\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n  }} >{ children }</JwtContext.Provider>\n}\nJwtContextProvider.props = {\n  config: PropTypes.object,\n}\nexport { JwtContextProvider }\n\n\nexport const SimpleJwtRow = () => {\n  return <div>\n    <h1>SimpleJwtRow2</h1>\n  </div>\n}\n\n\n\nconst _W = styled.div`\n  display: flex;\n\n  > * {\n    // margin: auto .4em;\n  }\n`;\n\nexport const LoginWithPassword = (props) => {\n  const {\n    config,\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n  } = useContext(JwtContext)\n  const [ email, setEmail ] = useState('')\n  const [ password, setPassword ] = useState('')\n\n  const doPasswordLogin = async (email, password) => {\n    request.post(`${config.apiOrigin}${config.routes.loginPath}`, { email, password }).then((r) => r.data).then((resp) => {\n      localStorage.setItem(C.jwt_token, resp.jwt_token)\n      localStorage.setItem(C.current_user, JSON.stringify(resp))\n      setCurrentUser(resp) // must be done *after* setting C.jwt_token\n      setLoginModalOpen(false)\n    }).catch((e) => {\n      logg(e, 'e322')\n      toast(\"Login failed\")\n      setCurrentUser(C.anonUser)\n    })\n  }\n\n  return <_W>\n    <input type='email' value={email} onChange={(e) => setEmail(e.target.value) } /><br />\n    <input type='password' value={password} onChange={(e) => setPassword(e.target.value) }\n      onKeyDown={(e) => {\n        if (e.key === 'Enter') { doPasswordLogin(email, password) }\n      }}\n    />\n    <Btn onClick={() => doPasswordLogin(email, password)}>Password Login</Btn>\n  </_W>\n}\n\n\nexport const Logout = () => {\n  const { currentUser, setCurrentUser } = useContext(JwtContext)\n  const doLogout = () => {\n    localStorage.removeItem(C.jwt_token)\n    localStorage.removeItem(C.current_user)\n    setCurrentUser({})\n  }\n  return <Btn onClick={doLogout}>Logout</Btn>\n}\n"],"names":["axios","create","S","borderWidth","bottomDrawerClosedHeight","bottomDrawerOpenHeight","breadcrumbsHeight","thinBorderWidth","thinBorderRadius","lightTheme","thinBorder","colors","text","background","blue","darkGrey","lightGrey","red","border","cardBackground","darkTheme","BackIcon","styled","IonIcon","Btn","div","ChevronLeft","_ChevronLeft","p","theme","ChevronRight","_ChevronRight","Card","_Box","cursor","_Circle","logg","a","b","c","replace","length","window","console","log","MenuIcon","_MenuIcon","WBordered","WBorderedItem","Wrapper","ZoomContext","React","createContext","JwtContext","JwtContextProvider","children","props","config","useState","currentUser","setCurrentUser","loginModalOpen","setLoginModalOpen","PropTypes","object","SimpleJwtRow","_W","LoginWithPassword","useContext","email","setEmail","password","setPassword","doPasswordLogin","request","post","apiOrigin","routes","loginPath","then","r","data","resp","localStorage","setItem","C","jwt_token","current_user","JSON","stringify","e","toast","anonUser","target","value","key","Logout","doLogout","removeItem"],"mappings":"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"}