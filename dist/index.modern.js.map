{"version":3,"file":"index.modern.js","sources":["../src/shared/C.jsx","../src/shared/request.jsx","../src/shared/S.jsx","../src/shared/TwofoldContext.jsx","../src/shared/index.jsx","../src/components/users/AuthWidget.jsx","../src/components/users/LoginModal.jsx","../src/components/users/RegisterModal.jsx","../src/components/users/index.jsx","../src/AppGalleriesView.jsx","../src/index_galleries_view.jsx"],"sourcesContent":["\n/**\n * Constants\n *\n * * C.anonUser\n * * C.current_user\n * * C.jwt_token\n * * C.item_types\n *\n */\nconst C = {\n\n  // A\n  anonUser: {}, // as opposed to null\n\n  // B\n  bottomDrawerOpen: 'bottom-drawer-open', // localStorage\n\n  // C\n  collapsible: {\n    description: \"descr-sec\",\n    extra1: \"extra1-sec\",\n    extra2: \"extra2-sec\",\n    extra3: \"extra3-sec\",\n    map: \"map-sec\",\n    markers: \"markers-sec\",\n  },\n  collapsibles: 'collapsibles', // localStorage\n  current_user: 'current_user',\n\n  // F\n  foldedCenter: 'folded-center',\n  foldedLeft: 'folded-left', // twofoldContext\n  foldedRight: 'folded-right',\n\n  // H\n  horizontal: 'horizontal',\n\n  // I\n  item_types: {\n    gallery: 'Gallery',\n    report: 'Report',\n    video: 'Video',\n  },\n\n  // J\n  jwt_token: 'jwt_token',\n\n  // L\n  layout_onecol: 'onecol',\n  layout_mapui: 'mapui',\n  locations: {\n    earth: 'earth',\n  },\n\n  // M\n  map_panel_types: {\n    Equirectangular: \"Equirectangular\",\n    MapPanel: \"MapPanel\",\n    MapPanelNoZoom: \"MapPanelNoZoom\",\n    ThreePanelV1: \"ThreePanelV1\",\n    ThreePanelV4: \"ThreePanelV4\",\n  },\n\n  // N\n  names: {\n    scratchpad: 'Scratchpad',\n  },\n\n  // R\n  rated: {\n    nc17: 'nc-17',\n  },\n  ratedConfirmation: 'rated-confirmation', // localStorage\n\n  // T\n  theme: 'theme',\n  themes: {\n    dark: 'dark',\n    light: 'light',\n  },\n  twofoldPercent: 'twofold-percent', // localStorage\n\n  // V\n  variants: {\n    bordered: 'bordered', // for Newsitems\n    floating: 'floating', // for main-menu btn\n    inline: 'inline',     // for main-menu btn\n    transparent: 'transparent', // for markers on Right\n  },\n  vertical: 'vertical',\n}\nexport default C\n","\nimport axios from \"axios\"\n\n/*\nimport config from \"config\"\n\nconst settings = {\n  baseURL: config.apiOrigin\n}\n\nexport default axios.create(settings)\n*/\n\nexport default axios.create({})\n","\n/**\n * Style Constants\n */\nconst S = {\n  // Twofold layout\n  borderWidth: '10px',\n  bottomDrawerClosedHeight: '20px',\n  bottomDrawerOpenHeight: '115px',\n  breadcrumbsHeight: '30px',\n\n  thinBorderWidth: '2px',\n  thinBorderRadius: '5px',\n}\n\nconst lightTheme = {\n  ...S,\n  thinBorder: '2px solid black',\n  colors: {\n    text: 'black',\n    background: '#dedede',\n    blue: '#6aa3e9',\n    darkGrey: '#605d5d',\n    lightGrey: '#988b8b',\n    red: 'red',\n    border: 'black',\n    cardBackground: 'white'\n  }\n}\n\nconst darkTheme = {\n  ...S,\n  thinBorder: '2px solid white',\n  colors: {\n    text: 'white',\n    background: '#292929',\n    blue: '#73b0fa',\n    darkGrey: '#b3afaf',\n    lightGrey: '#4a4343',\n    red: '#eb83a8',\n    border: 'white',\n    cardBackground: '#1a1a1a'\n  }\n}\n\nexport default {\n  lightTheme,\n  darkTheme\n}","\nimport PropTypes from 'prop-types'\nimport React, { useEffect, useState } from 'react'\n\nimport {\n  C,\n } from \"$shared\"\n\nconst TwofoldContext = React.createContext({})\nconst TwofoldContextProvider = ({ children, ...props }) => {\n  // logg(props, 'TwofoldContextProvider')\n  const {\n    layout, setLayout,\n    loginModalOpen, setLoginModalOpen,\n    theme, toggleTheme, // @TODO: Theme is not part of TwofoldContext! _vp_ 2022-09-04\n  } = props\n\n  const api = useApi()\n\n  useEffect(() => {\n    let closure = setTimeout(async () => {\n      const result = await api.getMyAccount()\n      setCurrentUser(result)\n    }, 1 * 1000)\n    return () => clearTimeout(closure)\n  }, [currentUser.is_purchasing])\n\n  /* B */\n  // @TODO: does localStorage work like this on mobile?\n  // @TODO: try and catch?\n  const [ bottomDrawerOpen, _setBottomDrawerOpen ] = useState(JSON.parse(localStorage.getItem(C.bottomDrawerOpen)))\n  const setBottomDrawerOpen = (m) => {\n    localStorage.setItem(C.bottomDrawerOpen, JSON.stringify(m))\n    _setBottomDrawerOpen(m)\n  }\n\n  /* F */\n  const [ folded, setFolded ] = useState()\n\n  /* I */\n  const [ itemToUnlock, _setItemToUnlock ] = useState({})\n  const setItemToUnlock = (item) => {\n    if (itemToUnlock.id !== item.id && !loginModalOpen) {\n      _setItemToUnlock(item)\n    }\n  }\n\n  /* M */\n  const [ mapPanelWidth, setMapPanelWidth ] = useState(null)\n  const [ mapPanelHeight, setMapPanelHeight ] = useState(null)\n\n  /* P */\n  const [ purchaseModalIsOpen, setPurchaseModalIsOpen ] = useState(false)\n\n  /* R */\n  const [ ratedConfirmation, _setRatedConfirmation ] = useState(JSON.parse(localStorage.getItem(C.ratedConfirmation)))\n  const setRatedConfirmation = (which) => {\n    localStorage.setItem(C.ratedConfirmation, JSON.stringify(which))\n    _setRatedConfirmation(which)\n  }\n\n  /* S */\n  const [ showItem, setShowItem ] = useState(false)\n  const [ showUrl, setShowUrl ] = useState(false)\n\n  /* T */\n  let tmp, defaultTwofoldPercent = 0.5\n  if (tmp = localStorage.getItem(C.twofoldPercent)) {\n    try {\n      defaultTwofoldPercent = JSON.parse(tmp)\n    } catch (err) {\n      logg(err, 'cannot get twofoldPercent from localStorage')\n    }\n  }\n  const [ twofoldPercent, setTwofoldPercent ] = useState(0.5)\n\n  /* Z */\n  const [ zoom, setZoom ] = useState(1)\n\n  return <TwofoldContext.Provider value={{\n    bottomDrawerOpen, setBottomDrawerOpen,\n\n    folded, setFolded,\n\n    itemToUnlock, setItemToUnlock,\n\n    layout, setLayout,\n    loginModalOpen, setLoginModalOpen,\n\n    mapPanelHeight, setMapPanelHeight,\n    mapPanelWidth, setMapPanelWidth,\n\n    purchaseModalIsOpen, setPurchaseModalIsOpen,\n\n    ratedConfirmation, setRatedConfirmation,\n\n    showItem, setShowItem,\n    showUrl, setShowUrl,\n\n    twofoldPercent, setTwofoldPercent,\n\n    zoom, setZoom,\n\n    theme, toggleTheme,\n  }} >{ children }</TwofoldContext.Provider>\n}\nTwofoldContextProvider.propTypes = {} // none so far\n\nexport {\n  TwofoldContext,\n  TwofoldContextProvider,\n}\n// Is is better to have, or not have, this default export? _vp_ 2022-09-04\nexport default TwofoldContextProvider\n\n","/*\n *  $shared / index\n */\nimport { arrowBack, closeOutline, } from 'ionicons/icons'\nimport { CircularProgress as _CircularProgress } from '@material-ui/core'\nimport _Box from '@material-ui/core/Box'\nimport {\n  ChevronLeft as _ChevronLeft,\n  ChevronRight as _ChevronRight,\n  Close as _Close,\n  Menu as _MenuIcon,\n} from '@material-ui/icons'\nimport PropTypes from 'prop-types'\nimport React, { useEffect, useState } from 'react'\nimport {\n  Route as _Route, useHistory,\n} from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport C from './C'\n\n/* A */\n\nconst Actions = styled.div`\n\n  // @TODO: this should use variables, for Modal inner size.\n  // I'd need to do dependency injection of the variable, from infiniteshelterjs into ishlibjs.\n  position: fixed; // for GalleriesShow\n  top: 60px;\n  right: 60px;\n\n  display: flex;\n  flex-direction: row-reverse;\n`;\nexport { Actions }\n\n/* B */\n\n/**\n * Back Button\n */\n// const BackIcon = styled(IonIcon)\n// @TODO: reintroduce IonIcon maybe?\nconst BackIcon = styled.div`\n  margin-right: 5px;\n  cursor: pointer;\n`;\nexport const BackBtn = () => {\n  const history = useHistory()\n  return <BackIcon onClick={history.goBack} icon={arrowBack}></BackIcon>\n}\n\n/**\n * Just your regular shadowed box. Pointer cursor. TDD\n */\nexport const Btn = styled.div`\n  border: 1px solid gray;\n  border-radius: 5px;\n  cursor: pointer;\n  display: inline-block;\n  padding: .3em 1em;\n`;\n\n\n/* C */\nexport { default as C } from './C'\nexport const ChevronLeft = styled(_ChevronLeft)`\n  color: ${(p) => p.theme.colors.text}\n`;\nexport const ChevronRight = styled(_ChevronRight)`\n  color: ${(p) => p.theme.colors.text}\n`;\n\n/**\n * Card\n */\nexport const Card = styled(_Box)`\n  margin-bottom: 1em;\n  padding: 1em;\n  background: white;\n  cursor: ${p => p.cursor ? p.cursor : 'auto'};\n\n  display: flex;\n  flex-direction: column;\n`;\n\n/**\n * CloseBtn\n**/\nexport const CloseBtn = ({ children, ...props }) => {\n  return <_Close style={{ cursor: 'pointer', ...props.style }} {...props} />\n};\nCloseBtn.propTypes = {\n  onClick: PropTypes.func.isRequired,\n}\n\n/* D */\n\n/* F */\n\n/**\n * FlexCol\n**/\nconst _FlexCol = styled.div`\n  display: flex;\n  flex-direction: column;\n\n  > * {\n    margin: auto .4em; // @TODO: standardize this size!\n  }\n`;\nexport const FlexCol = ({ children, ...props }) => <_FlexCol className=\"FlexCol\" {...props} >{children}</_FlexCol>\n\n/**\n * FlexRow\n *\n * @TODO: Remove. Where is this used?! This is silly.\n**/\nexport const FlexRow = styled.div`\n  display: flex;\n\n  > * {\n    // margin: auto .4em; // @TODO: why? the LoginModal needs no margins!\n  }\n`;\n\n\n/* I */\n\n/**\n * Like the rails inflector, has methods:\n * tableize()\n */\nexport const inflector = {\n  tableize: (m) => {\n    switch(m) {\n      case 'Gallery':\n        return 'galleries'\n      default:\n      return `${m.toLowerCase()}s`\n    }\n  },\n}\n\n/* L */\n\n\n// From: https://codepen.io/charlyarg/pen/GByKja\nconst _Circle = styled.div`\n  position: fixed;\n  z-index: 999;\n  overflow: show;\n  margin: auto;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  width: 50px;\n  height: 50px;\n`;\nexport const Loading = (p) => <_Circle><_CircularProgress /></_Circle>\n\n/**\n * Usage: logg(someObject, 'label')\n *\n * This development-grade logger can be used instead of console.log() with some advantages:\n * * It encourages consistent labeling of logs. By labeling each log line, you can have dozens of log lines\n * written per action, and still know which log line comes from where.\n * The recommended label is the component name, or function name.\n * * If the label is present, the logged object is placed in the window, allowing you to inspect it in the console. The\n * label becomes the name of the object (stripped to [0-9a-zA-Z\\-_] chars). If you're logging a function, you can execute it.\n * If you log more than one thing, they can interact, allowing you to validate control flow.\n * * the logger can be turned off by making this function simply return.\n */\nconst logg = (a, b=\"\", c=null) => {\n  c = \"string\" === typeof c ? c : b.replace(/\\W/g, \"\");\n  if (c.length > 0 && typeof window !== \"undefined\") {\n    window[c] = a;\n  }\n\n  console.log(`+++ ${b}:`, a); // eslint-disable-line no-console\n};\n// optimized for Android (e.g. it inspects and doesn't use window)\nconst logg2 = (a, b=\"\", c=null) => {\n  console.log(`+++ ${b}:`, a.inspect); // eslint-disable-line no-console\n};\nexport { logg, logg2 };\n\n/* M */\nexport const MenuIcon = styled(_MenuIcon)`\n  color: ${(p) => p.theme.colors.text}\n`;\n\n\nconst _Header = styled.div`\n  flex-grow: 1;\n  text-align: center;\n  font-size: 1.2rem;\n`;\nexport const ModalHeader = ({ children, onClose, ...props }) => {\n  return <FlexRow >\n    <_Header>{children}</_Header>\n    <CloseBtn onClick={onClose} />\n  </FlexRow>\n}\nModalHeader.propTypes = {\n  onClose: PropTypes.func.isRequired,\n}\n\n/* P */\n\n/**\n * pretty print date\n */\nexport const pp_date = (d) => (d || \"\" ).substring(0, 10)\n\n/* R */\n\nexport { default as request } from \"./request\"\n\n/* S */\nexport { default as S } from \"./S\"\n\n/* T */\n\nexport { TwofoldContext, TwofoldContextProvider } from './TwofoldContext'\n\n/* U */\nexport { default as useWindowSize } from './useWindowSize'\n\n/* W */\n\n/**\n * Wrapper Bordered. This expects a list? _vp_ 2021-11-02\n * Used in collapsibles and MarkersList\n */\nexport const WBordered = styled.div`\n  border: ${p => p.theme.thinBorder};\n  border-radius: ${p => p.theme.thinBorderRadius};\n  background: ${p => p.theme.colors.cardBackground};\n  padding: .5em;\n\n  margin-bottom: 1em;\n`;\n\n/**\n * Wrapper Bordered Item. Is padded, margined.\n */\nexport const WBorderedItem = styled.div`\n  border: ${p => p.theme.thinBorder};\n  border-radius: ${p => p.theme.thinBorderRadius};\n  background: ${p => p.theme.colors.cardBackground};\n  color: ${p => p.theme.colors.text};\n\n  margin: 0 .5em .5em 0;\n  padding: .5em;\n\n  text-align: center;\n\n  width: 18%;\n  max-width: 140px;\n  min-width: 120px;\n`;\n\n\nexport const WidgetContainer = ({ children, ...props }) => {\n  return <WBordered {...props} >{ children }</WBordered>\n}\n\nexport const Wrapper = styled.div`\n  height: 100vh;\n`;\n\n/* Z */\n\nexport const ZoomContext = React.createContext({})\n\n\n\n","\nimport React, { Fragment as F, useContext, } from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\n\nimport {\n  AuthContext, AuthContextProvider,\n  FacebookLogin,\n  LoginModal, LoginWithEmail,\n  RegisterModal, RegisterWithEmail,\n} from \"$components/users\"\n\nimport {\n  Btn,\n  C,\n  FlexCol, FlexRow,\n  logg,\n} from \"$shared\"\n\n\nconst RegisterWithEmailBtn = (props) => {\n  return <Btn {...props} >Register with Email</Btn>\n}\nconst LoginWithEmailBtn = (props) => {\n  return <Btn {...props} >Login with Email</Btn>\n}\n\nconst IconLogout = ({ fill, w, h, ...props }) => {\n  // const theme = useTheme()\n\n  w = w ? w : '12px'\n  h = h ? h : '12px'\n  // fill = fill ? fill : theme.colors.text // @TODO: implement theme in ishlibjs\n  fill = fill ? fill : '#333333'\n\n  return <span {...props} >\n    <svg xmlns=\"http://www.w3.org/2000/svg\"\n      width={w} height={h}\n      viewBox=\"0 0 96.943 96.943\" style={{ enableBackground: 'new 0 0 96.943 96.943' }}\n    ><g><g><path d=\"M61.168,83.92H11.364V13.025H61.17c1.104,0,2-0.896,2-2V3.66c0-1.104-0.896-2-2-2H2c-1.104,0-2,0.896-2,2v89.623 c0,1.104,0.896,2,2,2h59.168c1.105,0,2-0.896,2-2V85.92C63.168,84.814,62.274,83.92,61.168,83.92z\"/> <path d=\"M96.355,47.058l-26.922-26.92c-0.75-0.751-2.078-0.75-2.828,0l-6.387,6.388c-0.781,0.781-0.781,2.047,0,2.828 l12.16,12.162H19.737c-1.104,0-2,0.896-2,2v9.912c0,1.104,0.896,2,2,2h52.644L60.221,67.59c-0.781,0.781-0.781,2.047,0,2.828 l6.387,6.389c0.375,0.375,0.885,0.586,1.414,0.586c0.531,0,1.039-0.211,1.414-0.586l26.922-26.92 c0.375-0.375,0.586-0.885,0.586-1.414C96.943,47.941,96.73,47.433,96.355,47.058z\"/> </g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g></g><g></g><g></g>\n    </svg>\n  </span>\n}\n\n/**\n * If user is logged in, display the email/handle and allow logout.\n * If user is not logged in, allow registration and login via Fb, and email+passwd.\n *\n * @TODO: doesn't seem like this belongs in ishlibjs _vp_ 2022-09-04\n**/\nconst AuthWidget = (props) => {\n  // logg(props, 'AuthWidget')\n\n  const {\n    currentUser, setCurrentUser,\n    doLogout: _doLogout,\n    setLoginModalOpen,\n    setRegisterModalOpen,\n  } = useContext(AuthContext)\n  // logg(useContext(AuthContext), 'AuthWidgetUsedAuthContext')\n\n  // @TODO: doesn't belong here. Should be injected from the host. _vp_ 2022-09-04\n  const doLogout = () => {\n    setCurrentUser(C.anonUser)\n    localStorage.removeItem('jwt_token')\n    window.location.reload(false)\n  }\n\n  const onError = (inn) => {\n    logg(inn, 'cannot login!')\n    toast('cannot login!')\n  }\n  const onSuccess = (inn) => {\n    logg('Logged in successfully.')\n    setCurrentUser(inn)\n  }\n\n  if (currentUser?.email) {\n    return <FlexRow>\n      [&nbsp;{currentUser.email}&nbsp;<IconLogout onClick={doLogout} >Logout</IconLogout>&nbsp;]\n    </FlexRow>\n  }\n\n  return <F>\n    <FlexCol>\n      {/* <FacebookLogin /> */}\n      <RegisterWithEmailBtn onClick={() => { setRegisterModalOpen(true) }} />\n      <LoginWithEmailBtn    onClick={() => { setLoginModalOpen(true) }} />\n    </FlexCol>\n\n    <RegisterModal />\n    <LoginModal {...{ onError, onSuccess }} />\n\n  </F>\n}\nAuthWidget.propTypes = {} // none so far\nexport default AuthWidget\n","\nimport PropTypes from 'prop-types'\nimport React, { Fragment as F, useContext, useState, } from 'react'\nimport Modal from \"react-modal\"\nimport { ToastContainer, toast } from 'react-toastify'\nimport styled from 'styled-components'\n\nimport {\n  Btn,\n  C, CloseBtn,\n  FlexCol, FlexRow,\n  logg,\n  ModalHeader,\n} from \"$shared\"\nimport {\n  AuthContext,\n} from './'\n\nimport styles from './LoginModal.module.scss'\n\n/**\n * LoginModal\n**/\nconst LoginModal = (props) => {\n  // logg(props, 'LoginModal, ishlibjs')\n  const {\n    onError, onSuccess,\n  } = props\n\n  const {\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n    registerModalOpen, setRegisterModalOpen,\n    useApi,\n  } = useContext(AuthContext)\n  // logg(useContext(AuthContext), 'LoginModalUsedAuthContext')\n\n  const [ email, setEmail ] = useState('')\n  const [ password, setPassword ] = useState('')\n  const api = useApi()\n\n  const doPasswordLogin = async (email, password) => {\n    api.postLogin({ email, password }).then((r) => {\n      setLoginModalOpen(false)\n      onSuccess(r)\n    }).catch((err) => {\n      logg(err, 'e323 - cannot postLogin()')\n      // setCurrentUser(C.anonUser)\n      toast(\"Could not login.\")\n      onError(err)\n    })\n  }\n\n  Modal.setAppElement('body')\n\n  return <Modal\n    className={`LoginModal ${styles.LoginModal}`}\n    isOpen={!!loginModalOpen}\n    overlayClassName={styles.LoginModalOverlay}\n    portalClassName={styles.LoginModalPortal}\n  >\n    <ModalHeader onClose={() => setLoginModalOpen(false)} >Login</ModalHeader>\n    { 'string' === typeof loginModalOpen && <FlexRow>\n      <div className={styles.Notice} >{ loginModalOpen }</div>\n    </FlexRow> }\n    <FlexCol>\n      <label htmlFor='email'>Email</label>\n      <input name='email' type='email' value={email} onChange={(e) => setEmail(e.target.value)    } />\n\n      <label htmlFor='password'>Password</label>\n      <input name='password' type='password' value={password} onChange={(e) => setPassword(e.target.value) }\n        onKeyDown={(e) => { if (e.key === 'Enter') { doPasswordLogin(email, password) } }}\n      />\n      <FlexRow style={{\n        flexDirection: 'row-reverse',\n        justifyContent: 'space-between',\n        marginTop: '0.4em',\n      }} >\n        <Btn onClick={() => doPasswordLogin(email, password)}>Login</Btn>\n      </FlexRow>\n    </FlexCol>\n    <hr style={{ margin: '2rem 0', borderWidth: '1px' }} />\n    <FlexRow style={{ justifyContent: 'center' }} >\n      <a onClick={() => setLoginModalOpen(false) || setRegisterModalOpen(true) }>Register Instead</a>\n    </FlexRow>\n  </Modal>\n}\nLoginModal.propTypes = {\n  onError: PropTypes.func,\n  onSuccess: PropTypes.func,\n}\nexport default LoginModal\n","\nimport React, { useContext, useState, } from 'react'\nimport Modal from \"react-modal\"\nimport { toast } from 'react-toastify'\nimport PropTypes from 'prop-types'\n\nimport {\n  Btn,\n  C, CloseBtn,\n  FlexCol, FlexRow,\n  ModalHeader,\n  logg,\n} from '$shared'\nimport {\n  AuthContext,\n} from '$components/users'\n\nimport styles from './LoginModal.module.scss'\n\n\n/**\n * RegisterModal\n *\n * Uses LoginModal styling\n**/\nconst RegisterModal = (props) => {\n  // logg(props, 'RegisterModal')\n\n  const {\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n    registerModalOpen, setRegisterModalOpen,\n    useApi,\n  } = useContext(AuthContext)\n  // logg(useContext(AuthContext), 'registerModalUsedContext')\n\n  const api = useApi()\n\n  const [ email, setEmail ] = useState('')\n  const [ password, setPassword ] = useState('')\n  const [ password2, setPassword2 ] = useState('')\n\n  const doRegister = async (email, password, password2) => {\n    if (password !== password2) {\n      toast('Passwords do not match')\n      return\n    }\n    const out = api.doRegister({ email, password })\n\n    out.then((r) => {\n      setRegisterModalOpen(false)\n      setLoginModalOpen(r.message)\n    }).catch((e) => {\n      toast(\"Registration failed\")\n    })\n  }\n\n  return <Modal\n    className={`LoginModal ${styles.LoginModal}`}\n    isOpen={registerModalOpen}\n    overlayClassName={styles.LoginModalOverlay}\n    portalClassName={styles.LoginModalPortal}\n  >\n    <ModalHeader onClose={() => setRegisterModalOpen(false)} >Register</ModalHeader>\n    <FlexCol>\n      <label htmlFor='email'>Email</label>\n      <input type='email'    name='email'     value={email}    onChange={(e) => setEmail(e.target.value)    } />\n\n      <label htmlFor='password'>Password</label>\n      <input type='password' name='password'  value={password} onChange={(e) => setPassword(e.target.value) } />\n\n      <label htmlFor='password2'>Confirm Password</label>\n      <input type='password' name='password2' value={password2} onChange={(e) => setPassword2(e.target.value) } />\n\n      <FlexRow style={{\n        flexDirection: 'row-reverse',\n        justifyContent: 'space-between',\n        marginTop: '0.4em',\n      }} >\n        <Btn className=\"Submit\" onClick={() => doRegister(email, password, password2) }>Register</Btn>\n      </FlexRow>\n      <hr style={{ margin: '2rem 0', borderWidth: '1px' }} />\n      <FlexRow style={{ justifyContent: 'center' }} >\n        <a onClick={() => setLoginModalOpen(true) || setRegisterModalOpen(false) }>Login Instead</a>\n      </FlexRow>\n    </FlexCol>\n  </Modal>\n}\nRegisterModal.propTypes = {} // None so far\n\nexport default RegisterModal\n","\nimport { Plugins } from '@capacitor/core'\nimport React, { createContext, useContext, useState } from 'react'\nimport PropTypes from 'prop-types'\n\nimport {\n  Btn,\n  C,\n  logg,\n} from '$shared'\n\n/* A */\nconst AuthContext = createContext({})\nconst AuthContextProvider = ({children, ...props }) => {\n  // logg(props, 'AuthContextProvider')\n  let {\n    currentUser: _currentUser = C.anonUser, setCurrentUser: _setCurrentUser,\n    loginModalOpen: _loginModalOpen = false, setLoginModalOpen: _setLoginModalOpen,\n    registerModalOpen: _registerModalOpen = false, setRegisterModalOpen: _setRegisterModalOpen,\n  } = props\n\n  let [ currentUser, setCurrentUser ] = useState(_currentUser)\n  if (_setCurrentUser) {\n    currentUser = _currentUser\n    setCurrentUser = _setCurrentUser\n  }\n\n  let [ loginModalOpen, setLoginModalOpen ] = useState(_loginModalOpen)\n  if (_setLoginModalOpen) {\n    loginModalOpen = _loginModalOpen\n    setLoginModalOpen = _setLoginModalOpen\n  }\n\n  let [ registerModalOpen, setRegisterModalOpen ] = useState(_registerModalOpen)\n  if (_setRegisterModalOpen) {\n    registerModalOpen = _registerModalOpen\n    setRegisterModalOpen = _setRegisterModalOpen\n  }\n\n  const moreProps = {\n    currentUser, setCurrentUser,\n    loginModalOpen, setLoginModalOpen,\n    registerModalOpen, setRegisterModalOpen,\n  }\n\n  //\n  // props.useApi isRequired\n  //\n  return <AuthContext.Provider value={{ ...props, ...moreProps }} >\n    { children }\n  </AuthContext.Provider>\n}\nAuthContextProvider.propTypes = {\n  useApi: PropTypes.func.isRequired,\n}\n\nexport {\n  AuthContext, AuthContextProvider,\n}\nexport { default as AuthWidget } from './AuthWidget'\n\n/* D */\n/* F */\nconst { FacebookLogin: _FacebookLogin } = Plugins\n\nconst FACEBOOK_PERMISSIONS = ['email']\n\n/* J */\n\n\n\n/* L */\nexport { default as LoginModal } from \"./LoginModal\"\n\n/* R */\nexport { default as RegisterModal } from \"./RegisterModal\"\n\n\n","\nimport React, { useState, } from 'react'\nimport { toast, ToastContainer } from 'react-toastify'\n\n// import 'react-toastify/dist/ReactToastify.css' // @TODO: re-add somehow nicer.\n\nimport {\n  logg,\n  request,\n} from \"$shared\"\nimport {\n  AuthWidget,\n  AuthContextProvider,\n  LoginModal,\n } from './components/users'\n\nconst TestApp = () => {\n\n  const useApi = () => ({\n    doRegister: ({ email, password }) => {\n      return request.post(`${config.apiOrigin}/api/users`, { email, password }).then((r) => r.data).then((r) => {\n        logg(r, 'done registered')\n        return r\n      })\n    },\n  })\n\n  const [ loginModalOpen, setLoginModalOpen ] = useState(false) // useState(\"Please login!\")\n  const [ registerModalOpen, setRegisterModalOpen ] = useState(true) // useState(\"Please register\")\n\n  return <AuthContextProvider {...{\n    loginModalOpen, setLoginModalOpen,\n    registerModalOpen, setRegisterModalOpen,\n    useApi,\n  }} >\n\n    {/* <LoginModal /> */}\n    <AuthWidget />\n\n    <ToastContainer position=\"bottom-left\" />\n  </AuthContextProvider>\n}\nexport default TestApp\n","\nimport React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport {\n  logg,\n} from \"./shared\"\nimport App from './AppGalleriesView'\n\nif (process.env.REACT_APP_SERVE) {\n  ReactDOM.render(<App />, document.getElementById('root'))\n}\n"],"names":["C","anonUser","bottomDrawerOpen","collapsible","description","extra1","extra2","extra3","map","markers","collapsibles","current_user","foldedCenter","foldedLeft","foldedRight","horizontal","item_types","gallery","report","video","jwt_token","layout_onecol","layout_mapui","locations","earth","map_panel_types","Equirectangular","MapPanel","MapPanelNoZoom","ThreePanelV1","ThreePanelV4","names","scratchpad","rated","nc17","ratedConfirmation","theme","themes","dark","light","twofoldPercent","variants","bordered","floating","inline","transparent","vertical","axios","create","S","borderWidth","bottomDrawerClosedHeight","bottomDrawerOpenHeight","breadcrumbsHeight","thinBorderWidth","thinBorderRadius","lightTheme","thinBorder","colors","text","background","blue","darkGrey","lightGrey","red","border","cardBackground","darkTheme","TwofoldContext","React","createContext","Actions","styled","div","BackIcon","Btn","ChevronLeft","_ChevronLeft","p","ChevronRight","_ChevronRight","Card","_Box","cursor","CloseBtn","props","_Close","style","propTypes","onClick","PropTypes","func","isRequired","_FlexCol","FlexCol","children","FlexRow","_Circle","logg","a","b","c","replace","length","window","console","log","MenuIcon","_MenuIcon","_Header","ModalHeader","onClose","WBordered","WBorderedItem","Wrapper","ZoomContext","RegisterWithEmailBtn","LoginWithEmailBtn","IconLogout","w","h","enableBackground","AuthWidget","useContext","AuthContext","currentUser","setCurrentUser","_doLogout","setLoginModalOpen","setRegisterModalOpen","doLogout","localStorage","removeItem","location","reload","onError","inn","toast","onSuccess","email","F","LoginModal","loginModalOpen","registerModalOpen","useApi","useState","setEmail","password","setPassword","api","doPasswordLogin","postLogin","then","r","catch","err","Modal","setAppElement","styles","LoginModalOverlay","LoginModalPortal","Notice","e","target","value","key","flexDirection","justifyContent","marginTop","margin","RegisterModal","password2","setPassword2","doRegister","out","message","AuthContextProvider","_currentUser","_setCurrentUser","_loginModalOpen","_setLoginModalOpen","_registerModalOpen","_setRegisterModalOpen","moreProps","TestApp","request","post","config","apiOrigin","data","process","env","REACT_APP_SERVE","ReactDOM","render","App","document","getElementById"],"mappings":"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"}